!function n(i,r,o){function a(t,e){if(!r[t]){if(!i[t]){var s="function"==typeof require&&require;if(!e&&s)return s(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}s=r[t]={exports:{}},i[t][0].call(s.exports,function(e){return a(i[t][1][e]||e)},s,s.exports,n,i,r,o)}return r[t].exports}for(var l="function"==typeof require&&require,e=0;e<o.length;e++)a(o[e]);return a}({1:[function(e,t,s){t.exports=msgpack},{}],2:[function(e,t,s){"use strict";var n,i;Object.defineProperty(s,"__esModule",{value:!0}),s.GunColor=s.TIMEOUT=s.MINIMAP_SIZE=s.GRID_INTERVAL=s.movementKeys=s.KeyBind=s.CommonNumber=s.CommonAngle=void 0,(n=i=s.CommonAngle||(s.CommonAngle={}))[n.PI_FOUR=Math.PI/4]="PI_FOUR",n[n.PI_TWO=Math.PI/2]="PI_TWO",(n=s.CommonNumber||(s.CommonNumber={}))[n.SIN45=Math.sin(i.PI_FOUR)]="SIN45",(i=n=s.KeyBind||(s.KeyBind={})).MENU="Escape",i.HIDE_HUD="F1",i.WORLD_MAP="g",i.HIDE_MAP="z",i.BIG_MAP="v",i.RIGHT="d",i.UP="w",i.LEFT="a",i.DOWN="s",i.INTERACT="f",i.MELEE="e",i.LAST_USED="q",s.movementKeys=[n.RIGHT,n.UP,n.LEFT,n.DOWN].map(e=>e),s.GRID_INTERVAL=20,s.MINIMAP_SIZE=100,s.TIMEOUT=1e4,(i=s.GunColor||(s.GunColor={}))[i.YELLOW=0]="YELLOW",i[i.RED=1]="RED",i[i.BLUE=2]="BLUE",i[i.GREEN=3]="GREEN",i[i.SUBSONIC=4]="SUBSONIC",i[i.DEAGLE=5]="DEAGLE"},{}],3:[function(e,t,i){"use strict";var r,n=this&&this.__awaiter||function(e,o,a,l){return new(a=a||Promise)(function(s,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?s(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0}),i.getPlayer=i.getId=i.world=void 0;const o=e("msgpack-lite"),a=e("./constants"),l=e("./renderer"),c=e("./rendering/map"),s=e("./states"),d=e("./store/entities"),h=e("./store/obstacles"),u=e("./store/terrains"),p=e("./types/math"),y=e("./types/packet"),m=e("./types/terrain");i.world=new m.World;var f,g,b,w;i.getId=function(){return r};var P=!(i.getPlayer=function(){return b});null!=(e=document.getElementById("connect"))&&e.addEventListener("click",()=>n(void 0,void 0,void 0,function*(){var t=document.getElementById("error-div");f=document.getElementById("username").value,g=document.getElementById("address").value;try{var e=f,s=g;if(!e)throw new Error("Please provide a username.");if(50<e.length)throw new Error("Username too long! Try another username.");if(!s)throw new Error("Please provide an address.");yield function(e){return n(this,void 0,void 0,function*(){(w=new WebSocket("ws://"+e)).binaryType="arraybuffer",yield new Promise((t,s)=>{const n=setTimeout(()=>{s(new Error("WebSocket timeout")),w.close()},a.TIMEOUT);w.onmessage=e=>{var e=(0,o.decode)(new Uint8Array(e.data));r=e.id,e.tps,i.world=new m.World(new p.Vec2(e.size[0],e.size[1]),(0,u.castCorrectTerrain)(e.terrain)),w.send((0,o.encode)({username:f,id:r}).buffer),P=!0,clearTimeout(n),(0,l.setRunning)(!0),(0,l.animate)(0),null!=(e=document.getElementById("menu"))&&e.classList.add("hidden");const t=setInterval(()=>{P?w.send((0,o.encode)(new y.PingPacket).buffer):clearInterval(t)},1e3);w.onmessage=e=>{var t=(0,o.decode)(new Uint8Array(e.data));switch(t.type){case"game":var s=t;i.world.updateEntities(s.entities),i.world.updateObstacles(s.obstacles),b?b.copy(s.player):b=new d.Player(s.player);break;case"map":s=t;i.world.terrains=s.terrains.map(e=>(0,u.castCorrectTerrain)(e)),(0,c.initMap)(s.obstacles.map(e=>(0,h.castCorrectObstacle)((0,h.castMinObstacle)(e))))}}},w.onclose=()=>{var e;(P=!1,l.setRunning)(!1),null!=(e=document.getElementById("menu"))&&e.classList.remove("hidden"),b=f=r=null,i.world=new m.World,t(void 0)},w.onerror=e=>{console.error(e),s(new Error("WebSocket error"))}})})}(g),t.style.display="none"}catch(e){t.innerHTML=e.message,t.style.display="block"}})),null!=(e=document.getElementById("disconnect"))&&e.addEventListener("click",()=>{var e;w.close(),null!=(e=document.getElementById("settings"))&&e.classList.add("hidden"),(0,s.toggleMenu)()}),window.onkeydown=e=>{var t;P&&!(0,s.isKeyPressed)(e.key)&&(e.stopPropagation(),(0,s.addKeyPressed)(e.key),t=document.getElementById("settings"),e.key==a.KeyBind.MENU?((0,s.isMenuHidden)()?null!=t&&t.classList.remove("hidden"):null!=t&&t.classList.add("hidden"),(0,s.toggleMenu)()):e.key==a.KeyBind.HIDE_HUD?(0,s.toggleHud)():e.key==a.KeyBind.WORLD_MAP?(0,s.toggleMap)():e.key==a.KeyBind.HIDE_MAP?(0,s.toggleMinimap)():e.key==a.KeyBind.BIG_MAP&&(0,s.toggleBigMap)(),(0,s.isMenuHidden)())&&(0<=(t=a.movementKeys.indexOf(e.key))?w.send((0,o.encode)(new y.MovementPressPacket(t)).buffer):e.key==a.KeyBind.INTERACT?w.send((0,o.encode)(new y.InteractPacket).buffer):isNaN(parseInt(e.key))||w.send((0,o.encode)(new y.SwitchWeaponPacket(parseInt(e.key)+1-((null==b?void 0:b.inventory).holding||0)))))},window.onkeyup=e=>{P&&(e.stopPropagation(),(0,s.removeKeyPressed)(e.key),0<=(e=a.movementKeys.indexOf(e.key)))&&w.send((0,o.encode)(new y.MovementReleasePacket(e)).buffer)},window.onmousemove=e=>{P&&(e.stopPropagation(),w.send((0,o.encode)(new y.MouseMovePacket(e.x-window.innerWidth/2,e.y-window.innerHeight/2)).buffer))},window.onmousedown=e=>{P&&(e.stopPropagation(),(0,s.addMousePressed)(e.button),w.send((0,o.encode)(new y.MousePressPacket(e.button))))},window.onmouseup=e=>{P&&(e.stopPropagation(),(0,s.removeMousePressed)(e.button),w.send((0,o.encode)(new y.MouseReleasePacket(e.button))))},window.onwheel=e=>{P&&b&&(e.stopPropagation(),e=e.deltaY<0?-1:1,w.send((0,o.encode)(new y.SwitchWeaponPacket(e))))}},{"./constants":2,"./renderer":4,"./rendering/map":6,"./states":8,"./store/entities":16,"./store/obstacles":24,"./store/terrains":29,"./types/math":48,"./types/packet":50,"./types/terrain":51,"msgpack-lite":1}],4:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.animate=s.setRunning=void 0;const h=e("./constants"),u=e("./game"),p=e("./rendering/hud"),y=e("./rendering/map"),m=e("./states"),f=e("./utils"),g=e("./rendering/prompt"),b=document.getElementById("game");b.width=window.innerWidth,b.height=window.innerHeight;var w,P=!(window.onresize=()=>{b.width=window.innerWidth,b.height=window.innerHeight});s.setRunning=function(e){P=e};const x=b.getContext("2d");s.animate=function e(t){const s=t-(w=w||t);w=t;try{x.fillStyle=u.world.defaultTerrain.colorToHex(),x.fillRect(0,0,b.width,b.height);const c=(0,u.getPlayer)();if(c){const d=Math.max(b.width,b.height)/(20+20*c.scope);var n=u.world.size,i=b.width/2-c.position.x*d,r=b.height/2-c.position.y*d,o=n.x*d,a=n.y*d;u.world.terrains.filter(e=>!!e.renderLayerN1).forEach(e=>e.renderLayerN1(c,b,x,d)),u.world.terrains.forEach(e=>e.render(c,b,x,d)),x.globalAlpha=.2;for(let e=0;e<=n.x;e+=h.GRID_INTERVAL)(0,f.lineBetween)(x,b.width/2-(c.position.x-e)*d,Math.max(r,0),b.width/2-(c.position.x-e)*d,Math.min(r+a,b.height));for(let e=0;e<=n.y;e+=h.GRID_INTERVAL)(0,f.lineBetween)(x,Math.max(i,0),b.height/2-(c.position.y-e)*d,Math.min(i+o,b.width),b.height/2-(c.position.y-e)*d);x.globalAlpha=1;var l=[];(l=l.concat(u.world.entities,u.world.obstacles)).push(c),(l=l.sort((e,t)=>e.zIndex-t.zIndex)).filter(e=>!!e.renderLayerN1).forEach(e=>e.renderLayerN1(c,b,x,d)),l.forEach(e=>{e.render(c,b,x,d),e.renderTick(s)}),x.fillStyle=u.world.defaultTerrain.colorToHex(),x.fillRect(0,0,b.width/2-c.position.x*d,b.height/2-c.position.y*d),x.fillRect(b.width,0,(u.world.size.x-c.position.x)*d-b.width/2,b.height/2-c.position.y*d),x.fillRect(0,b.height,b.width/2-c.position.x*d,(u.world.size.y-c.position.y)*d-b.height/2),x.fillRect(b.width,b.height,(u.world.size.x-c.position.x)*d-b.width/2,(u.world.size.y-c.position.y)*d-b.height/2),x.fillRect(b.width/2-c.position.x*d,0,u.world.size.x*d,b.height/2-c.position.y*d),x.fillRect(b.width/2-c.position.x*d,b.height,u.world.size.x*d,(u.world.size.y-c.position.y)*d-b.height/2),x.fillRect(0,b.height/2-c.position.y*d,b.width/2-c.position.x*d,u.world.size.y*d),x.fillRect(b.width,b.height/2-c.position.y*d,(u.world.size.x-c.position.x)*d-b.width/2,u.world.size.y*d),x.strokeStyle="#000000",x.lineWidth=d/4,x.strokeRect(i,r,o,a),(0,m.isHudHidden)()||(0,p.drawHud)(c,b,x),(0,m.isMapOpened)()?(0,y.drawMap)(b,x):(0,m.isMapHidden)()||(0,y.drawMinimap)(c,b,x),c.canInteract&&(0,g.drawPrompt)(b,x,d)}}catch(e){console.error(e)}P&&requestAnimationFrame(e)}},{"./constants":2,"./game":3,"./rendering/hud":5,"./rendering/map":6,"./rendering/prompt":7,"./states":8,"./utils":53}],5:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.drawHud=void 0;const p=e("../utils");s.drawHud=function(e,t,s){var n=e,i=t,r=s,o=i.width/4,a=i.height/20,l=Math.min(i.width,i.height)/100,c=o-2*l,d=a-2*l,o=(r.fillStyle="#000000",r.globalAlpha=.2,(0,p.roundRect)(r,(i.width-o)/2,i.height-a-l,o,a,l/2),n.health==n.maxHealth?r.fillStyle="#ccc":n.health/n.maxHealth<.8?r.fillStyle="#fdd":n.health/n.maxHealth<.25?r.fillStyle="#daa":r.fillStyle="#fff",r.globalAlpha=1,(0,p.roundRect)(r,(i.width-c)/2,i.height-a,c*n.health/n.maxHealth,d,l/2),e),r=t,h=((i=s).fillStyle="#fff",i.font=r.height/27+"px Arial",i.textBaseline="bottom",i.textAlign="end",o.inventory),u="";for(let e=0;e<h.weapons.length;e++)h.weapons[e]&&(0!=e&&(u+=" "),e==h.holding?u+=`[${h.weapons[e].name}]`:u+=h.weapons[e].name);i.fillText(u,191*r.width/192,r.height-r.width/192)}},{"../utils":53}],6:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.drawMinimap=s.drawMap=s.initMap=void 0;const r=e("../constants"),o=e("../game"),a=e("../states"),l=e("../utils"),c=document.createElement("canvas");var d,h;const u=document.createElement("canvas");s.initMap=function(e){var t=o.world.size,s=Math.max(t.x,t.y),n=Math.min(window.screen.availWidth,window.screen.availHeight);c.width=n*t.x/s,c.height=n*t.y/s,h=n/s;const i=c.width/o.world.size.x;(d=c.getContext("2d")).fillStyle=o.world.defaultTerrain.colorToHex(),d.fillRect(0,0,c.width,c.height),o.world.terrains.filter(e=>!!e.renderMapLayerN1).forEach(e=>e.renderMapLayerN1(c,d,i)),o.world.terrains.forEach(e=>e.renderMap(c,d,i)),d.strokeStyle="#000000",d.lineWidth=1,d.globalAlpha=.2;for(let e=0;e<=t.x;e+=r.GRID_INTERVAL)(0,l.lineBetween)(d,e*n/s,0,e*n/s,c.height);for(let e=0;e<=t.y;e+=r.GRID_INTERVAL)(0,l.lineBetween)(d,0,e*n/s,c.width,e*n/s);d.globalAlpha=1,(e=e.sort((e,t)=>e.zIndex-t.zIndex)).filter(e=>!!e.renderMapLayerN1).forEach(e=>e.renderMapLayerN1(c,d,i)),e.forEach(e=>e.renderMap(c,d,i))},s.drawMap=function(e,t){var s,n,i=e.width/c.width,i=(r=e.height/c.height)*c.width>e.width?(s=e.width,n=i*c.height,e.width/o.world.size.x):(s=r*c.width,n=e.height,e.height/o.world.size.y),r=(t.drawImage(c,(e.width-s)/2,(e.height-n)/2,s,n),t.strokeStyle="#000",t.lineWidth=2,t.strokeRect((e.width-s)/2,(e.height-n)/2,s,n),(0,o.getPlayer)());t.fillStyle="#F8C675",(0,l.circleFromCenter)(t,(e.width-s)/2+r.position.x*i,(e.height-n)/2+r.position.y*i,8),(0,l.circleFromCenter)(t,(e.width-s)/2+r.position.x*i,(e.height-n)/2+r.position.y*i,12,!1,!0)},s.drawMinimap=function(e,t,s){var n=r.MINIMAP_SIZE*h*((0,a.isBigMap)()?1.5:1),i=e.position.x*h-n/2,e=e.position.y*h-n/2,i=d.getImageData(i,e,n,n),n=(u.width=u.height=n,null!=(e=u.getContext("2d"))&&e.putImageData(i,0,0),t.width/100),e=t.width/(8/((0,a.isBigMap)()?1.5:1));s.fillStyle=o.world.defaultTerrain.colorToHex(),s.fillRect(n,t.height-n-e,e,e),s.drawImage(u,n,t.height-n-e,e,e),s.strokeStyle="#000",s.lineWidth=2,s.strokeRect(n,t.height-n-e,e,e),s.fillStyle="#F8C675",(0,l.circleFromCenter)(s,n+e/2,t.height-n-e/2,8),(0,l.circleFromCenter)(s,n+e/2,t.height-n-e/2,12,!1,!0)}},{"../constants":2,"../game":3,"../states":8,"../utils":53}],7:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.drawPrompt=void 0;const o=e("../constants"),a=e("../utils");s.drawPrompt=function(e,t,s){var n,i,r;t=t,s=s,n=(e=e).height/27,t.font=n+"px Arial bold",t.textBaseline="top",t.textAlign="center",i=t.measureText(`[${o.KeyBind.INTERACT.toUpperCase()}] Interact`),r=1.5*s,s*=.25,i=i.width+2*s,t.fillStyle="#000",t.globalAlpha=.6,(0,a.roundRect)(t,(e.width-i)/2,e.height/2+r,i,n+2*s,e.height/108),t.fillStyle="#fff",t.globalAlpha=1,t.fillText("[F] Interact",e.width/2,e.height/2+s+r)}},{"../constants":2,"../utils":53}],8:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.toggleBigMap=s.isBigMap=s.toggleMinimap=s.isMapHidden=s.toggleMap=s.isMapOpened=s.toggleHud=s.isHudHidden=s.toggleMenu=s.isMenuHidden=s.removeMousePressed=s.addMousePressed=s.isMousePressed=s.removeKeyPressed=s.addKeyPressed=s.isKeyPressed=void 0;const n=new Map;s.isKeyPressed=function(e){return!!n.get(e)},s.addKeyPressed=function(e){n.set(e,!0)},s.removeKeyPressed=function(e){n.delete(e)};const i=new Map;s.isMousePressed=function(e){return!!i.get(e)},s.addMousePressed=function(e){i.set(e,!0)},s.removeMousePressed=function(e){i.delete(e)};var r=!0;s.isMenuHidden=function(){return r};var o=!(s.toggleMenu=function(){r=!r});s.isHudHidden=function(){return o};var a=!(s.toggleHud=function(){o=!o});s.isMapOpened=function(){return a};var l=!(s.toggleMap=function(){a=!a});s.isMapHidden=function(){return l};var c=!(s.toggleMinimap=function(){l=!l});s.isBigMap=function(){return c},s.toggleBigMap=function(){c=!c}},{}],9:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e(".");var i=e("../../types/animation"),e=e("../../types/math");const r=new i.DefinedAnimation("left_fist",[new e.Vec2(0,-1),e.Vec2.ONE,new e.Vec2(0,-1)],Array(3).fill(e.Vec2.ONE),[0,.5,1],500),o=new i.DefinedAnimation("right_fist",[new e.Vec2(0,1),e.Vec2.ONE,new e.Vec2(0,1)],Array(3).fill(e.Vec2.ONE),[0,.5,1],500);s.default=function(){n.DEFINED_ANIMATIONS.set(r.id,r),n.DEFINED_ANIMATIONS.set(o.id,o)}},{".":11,"../../types/animation":46,"../../types/math":48}],10:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e(".");var i=e("../../types/animation"),e=e("../../types/math");const r=new i.DefinedAnimation("small_recoil",[new e.Vec2(-.1,0),e.Vec2.ZERO],Array(2).fill(e.Vec2.ONE),[0,1],100),o=new i.DefinedAnimation("medium_recoil",[new e.Vec2(-.25,0),e.Vec2.ZERO],Array(2).fill(e.Vec2.ONE),[0,1],150),a=new i.DefinedAnimation("large_recoil",[new e.Vec2(-.5,0),e.Vec2.ZERO],Array(2).fill(e.Vec2.ONE),[0,1],200);s.default=function(){n.DEFINED_ANIMATIONS.set(r.id,r),n.DEFINED_ANIMATIONS.set(o.id,o),n.DEFINED_ANIMATIONS.set(a.id,a)}},{".":11,"../../types/animation":46,"../../types/math":48}],11:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DEFINED_ANIMATIONS=void 0;var n=e("./fists"),e=e("./guns");s.DEFINED_ANIMATIONS=new Map,(0,n.default)(),(0,e.default)()},{"./fists":9,"./guns":10}],12:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e("."),i=e("../../constants");e=e("../../types/entity");class r{create(e){return new a(e)}}const o=[["#332300","#b37a00","#f2a500"],["#4c0000","#b30000","#f20000"],["#002c6d","#0048b3","#0061f2"],["#013d00","#026f00","#039600"],["#111111","#111111","#006400"]];class a extends e.Entity{constructor(e){super(e),this.type=a.TYPE,this.zIndex=8,this.copy(e)}copy(e){super.copy(e),this.amount=e.amount,this.color=e.color}render(e,t,s,n){e=this.position.addVec(e.position.inverse()),s.translate(t.width/2+e.x*n,t.height/2+e.y*n),s.rotate(-this.direction.angle()),s.scale(n,n),t=this.hitbox.comparable*Math.sin(i.CommonAngle.PI_TWO);s.strokeStyle=o[this.color][0],s.lineWidth=.2,s.fillStyle=o[this.color][1],s.fillRect(-t/2,-t/2,t,t),s.strokeRect(-t/2,-t/2,t,t),s.fillStyle=o[this.color][2],s.fillRect(-t/8,-t/4,t/3,t/3),s.resetTransform()}}(s.default=a).TYPE="ammo",n.ENTITY_SUPPLIERS.set(a.TYPE,new r)},{".":16,"../../constants":2,"../../types/entity":47}],13:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e(".");class i{create(e){return new r(e)}}class r extends e("../../types/entity").Entity{constructor(e){super(e),this.type=r.TYPE,this.copy(e)}copy(e){super.copy(e),this.dmg=e.dmg}render(e,t,s,n){}}(s.default=r).TYPE="bullet",n.ENTITY_SUPPLIERS.set(r.TYPE,new i)},{".":16,"../../types/entity":47}],14:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e("."),r=e("../../textures");var i=e("../../types/entity");const o=e("../../utils");new Map;class a{create(e){return new l(e)}}class l extends i.Entity{constructor(e){super(e),this.type=l.TYPE,this.copy(e)}copy(e){super.copy(e),this.name=e.name}render(e,t,s,n){var e=this.position.addVec(e.position.inverse()),i=n*this.hitbox.comparable,e=(s.translate(t.width/2+e.x*n,t.height/2+e.y*n),s.rotate(-this.direction.angle()),s.strokeStyle="#000",s.lineWidth=.1*n,(0,o.circleFromCenter)(s,0,0,i,!1,!0),s.fillStyle="#00000066",(0,o.circleFromCenter)(s,0,0,i,!0,!1),(0,r.getWeaponImage)(this.name));null!=e&&e.loaded?s.drawImage(e,-.6*i,-.6*i,1.2*i,1.2*i):(s.textAlign="center",s.textBaseline="middle",s.fillStyle="#fff",s.font=t.height/54+"px Arial",s.fillText(this.name,0,0)),s.resetTransform()}}(s.default=l).TYPE="grenade",n.ENTITY_SUPPLIERS.set(l.TYPE,new a)},{".":16,"../../textures":45,"../../types/entity":47,"../../utils":53}],15:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e("."),r=e("../../textures");var i=e("../../types/entity");const o=e("../../utils");class a{create(e){return new c(e)}}const l=["#F2A500","#F20000","#0061F2","#039700"];class c extends i.Entity{constructor(e){super(e),this.type=c.TYPE,this.zIndex=8,this.copy(e)}copy(e){super.copy(e),this.name=e.name,this.color=e.color}render(e,t,s,n){var e=this.position.addVec(e.position.inverse()),i=n*this.hitbox.comparable,e=(s.translate(t.width/2+e.x*n,t.height/2+e.y*n),s.rotate(-this.direction.angle()),s.strokeStyle=l[this.color],s.lineWidth=.25*n,(0,o.circleFromCenter)(s,0,0,i,!1,!0),s.fillStyle=l[this.color]+"66",(0,o.circleFromCenter)(s,0,0,i,!0,!1),(0,r.getWeaponImage)(this.name));null!=e&&e.loaded?s.drawImage(e,-.7*i,-.7*i,1.4*i,1.4*i):(s.textAlign="center",s.textBaseline="middle",s.fillStyle="#fff",s.font=t.height/54+"px Arial",s.fillText(this.name,0,0)),s.resetTransform()}}(s.default=c).TYPE="gun",n.ENTITY_SUPPLIERS.set(c.TYPE,new a)},{".":16,"../../textures":45,"../../types/entity":47,"../../utils":53}],16:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.castCorrectEntity=s.Player=s.Gun=s.Grenade=s.Bullet=s.Ammo=s.ENTITY_SUPPLIERS=void 0;const n=e("../../types/entity");s.ENTITY_SUPPLIERS=new Map;var i=e("./ammo"),r=(Object.defineProperty(s,"Ammo",{enumerable:!0,get:function(){return i.default}}),e("./bullet")),o=(Object.defineProperty(s,"Bullet",{enumerable:!0,get:function(){return r.default}}),e("./grenade")),a=(Object.defineProperty(s,"Grenade",{enumerable:!0,get:function(){return o.default}}),e("./gun")),l=(Object.defineProperty(s,"Gun",{enumerable:!0,get:function(){return a.default}}),e("./player"));Object.defineProperty(s,"Player",{enumerable:!0,get:function(){return l.default}}),s.castCorrectEntity=function(e){var t;return(null==(t=s.ENTITY_SUPPLIERS.get(e.type))?void 0:t.create(e))||new n.DummyEntity(e)}},{"../../types/entity":47,"./ammo":12,"./bullet":13,"./grenade":14,"./gun":15,"./player":17}],17:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e("."),i=e("../../types/entity"),r=e("../../utils"),o=e("../weapons"),a=Object.assign(new Image,{loaded:!1});a.onload=()=>a.loaded=!0,a.src="assets/images/game/entities/death.svg";class l{create(e){return new c(e)}}class c extends i.Entity{constructor(e){super(e),this.type=c.TYPE,this.zIndex=9,this.copy(e)}copy(e){var t;super.copy(e),this.username=e.username,this.boost=e.boost,this.scope=e.scope,"number"==typeof e.inventory.holding?(t=e.inventory,this.inventory=new i.Inventory(t.holding,t.slots,t.weapons.map(e=>e&&(0,o.castCorrectWeapon)(e)),t.ammos,t.utilities)):this.inventory=new i.PartialInventory(e.inventory),this.canInteract=e.canInteract||!1,this.despawn&&(this.zIndex=7)}render(e,t,s,n){var e=this.position.addVec(e.position.inverse()),i=n*this.hitbox.comparable;s.translate(t.width/2+e.x*n,t.height/2+e.y*n),this.despawn?(s.drawImage(a,2*-i,2*-i,4*i,4*i),s.textAlign="center",s.textBaseline="top",s.font=`700 ${n}px Jura`,s.fillStyle="#60605f",s.fillText(this.username,2,2*i+2),s.fillStyle="#80807f",s.fillText(this.username,0,2*i)):(s.rotate(this.direction.angle()),s.fillStyle="#F8C675",(0,r.circleFromCenter)(s,0,0,i),new o.Fists,("number"==typeof this.inventory.holding?this.inventory.weapons[this.inventory.holding]:this.inventory.holding).render(this,t,s,n)),s.resetTransform()}}(s.default=c).TYPE="player",n.ENTITY_SUPPLIERS.set(c.TYPE,new l)},{".":16,"../../types/entity":47,"../../utils":53,"../weapons":44}],18:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e(".");var i=e("../../types/obstacle");const r=e("../../utils"),o=Object.assign(new Image,{loaded:!1});o.onload=()=>o.loaded=!0,o.src="assets/images/game/objects/ak47stone.png";class a{create(e){return new l(e)}}class l extends i.Obstacle{constructor(){super(...arguments),this.type=l.TYPE}render(e,t,s,n){o.loaded&&(e=this.position.addVec(e.position.inverse()),s.translate(t.width/2+e.x*n,t.height/2+e.y*n),s.rotate(-this.direction.angle()),this.despawn?(t=n*this.hitbox.comparable/2,s.fillStyle="#000000",s.globalAlpha=.25,(0,r.circleFromCenter)(s,0,0,t),s.globalAlpha=1):(t=(e=n*this.hitbox.comparable*2)*o.naturalWidth/o.naturalHeight,s.drawImage(o,-e/2,-t/2,e,t)),s.resetTransform())}renderMap(e,t,s){t.fillStyle="#b3b3b3",(0,r.circleFromCenter)(t,this.position.x*s,this.position.y*s,2*s)}}(s.default=l).TYPE="ak47-stone",n.OBSTACLE_SUPPLIERS.set(l.TYPE,new a)},{".":24,"../../types/obstacle":49,"../../utils":53}],19:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e(".");e=e("../../types/obstacle");const o=Object.assign(new Image,{loaded:!1}),a=(o.onload=()=>o.loaded=!0,o.src="assets/images/game/objects/awm_crate.png",Object.assign(new Image,{loaded:!1}));a.onload=()=>a.loaded=!0,a.src="assets/images/game/objects/residues/crate.svg";class i{create(e){return new r(e)}}class r extends e.Obstacle{constructor(){super(...arguments),this.type=r.TYPE}render(e,t,s,n){var i,r;o.loaded&&a.loaded&&(e=this.position.addVec(e.position.inverse()),r=(i=n*this.hitbox.width*(this.despawn?.5:1))*o.naturalWidth/o.naturalHeight,s.translate(t.width/2+e.x*n,t.height/2+e.y*n),s.rotate(-this.direction.angle()),s.drawImage(this.despawn?a:o,-i/2,-r/2,1+i,.5+r),s.resetTransform())}renderMap(e,t,s){t.translate(this.position.x*s,this.position.y*s),t.fillStyle="#683c05",t.fillRect(-2*s,-2*s,5*s,4*s),t.resetTransform()}}(s.default=r).TYPE="AWMCrate",n.OBSTACLE_SUPPLIERS.set(r.TYPE,new i)},{".":24,"../../types/obstacle":49}],20:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=e("../../types/obstacle");const i=e("../../utils"),r=e("."),o=Object.assign(new Image,{loaded:!1}),a=(o.onload=()=>o.loaded=!0,o.src="assets/images/game/objects/barrel.png",Object.assign(new Image,{loaded:!1}));a.onload=()=>a.loaded=!0,a.src="assets/images/game/objects/residues/barrel.png";class l{create(e){return new c(e)}}class c extends n.Obstacle{constructor(e){super(e),this.type=c.TYPE,this.zIndex=10,this.despawn&&(this.zIndex=0)}render(e,t,s,n){o.loaded&&a.loaded&&(e=this.position.addVec(e.position.inverse()),s.translate(t.width/2+e.x*n,t.height/2+e.y*n),s.rotate(-this.direction.angle()),t=this.despawn?a:o,n=(e=n*this.hitbox.comparable*2*(this.despawn?.5:1))*t.naturalWidth/t.naturalHeight,s.drawImage(t,-e/2,-n/2,e,n),s.resetTransform())}renderMap(e,t,s){t.fillStyle="#005f00",(0,i.circleFromCenter)(t,this.position.x*s,this.position.y*s,2*s)}}(s.default=c).TYPE="barrel",r.OBSTACLE_SUPPLIERS.set(c.TYPE,new l)},{".":24,"../../types/obstacle":49,"../../utils":53}],21:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=e("../../types/obstacle");const i=e("../../utils"),r=e("."),o=Object.assign(new Image,{loaded:!1}),a=(o.onload=()=>o.loaded=!0,o.src="assets/images/game/objects/bush.svg",Object.assign(new Image,{loaded:!1}));a.onload=()=>a.loaded=!0,a.src="assets/images/game/objects/residues/bush.svg";class l{create(e){return new c(e)}}class c extends n.Obstacle{constructor(e){super(e),this.type=c.TYPE,this.zIndex=10,this.despawn&&(this.zIndex=0)}render(e,t,s,n){o.loaded&&a.loaded&&(e=this.position.addVec(e.position.inverse()),s.translate(t.width/2+e.x*n,t.height/2+e.y*n),s.rotate(-this.direction.angle()),t=this.despawn?a:o,n=(e=n*this.hitbox.comparable*2*(this.despawn?.5:1))*t.naturalWidth/t.naturalHeight,s.drawImage(t,-e/2,-n/2,e,n),s.resetTransform())}renderMap(e,t,s){t.fillStyle="#005f00",(0,i.circleFromCenter)(t,this.position.x*s,this.position.y*s,2*s)}}(s.default=c).TYPE="bush",r.OBSTACLE_SUPPLIERS.set(c.TYPE,new l)},{".":24,"../../types/obstacle":49,"../../utils":53}],22:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e(".");e=e("../../types/obstacle");const o=Object.assign(new Image,{loaded:!1}),a=(o.onload=()=>o.loaded=!0,o.src="assets/images/game/objects/crate.svg",Object.assign(new Image,{loaded:!1}));a.onload=()=>a.loaded=!0,a.src="assets/images/game/objects/residues/crate.svg";class i{create(e){return new r(e)}}class r extends e.Obstacle{constructor(){super(...arguments),this.type=r.TYPE}render(e,t,s,n){var i,r;o.loaded&&a.loaded&&(e=this.position.addVec(e.position.inverse()),r=(i=n*this.hitbox.width*(this.despawn?.5:1))*o.naturalWidth/o.naturalHeight,s.translate(t.width/2+e.x*n,t.height/2+e.y*n),s.rotate(-this.direction.angle()),s.drawImage(this.despawn?a:o,-i/2,-r/2,i,r),s.resetTransform())}renderMap(e,t,s){t.translate(this.position.x*s,this.position.y*s),t.fillStyle="#683c05",t.fillRect(-2*s,-2*s,4*s,4*s),t.resetTransform()}}(s.default=r).TYPE="crate",n.OBSTACLE_SUPPLIERS.set(r.TYPE,new i)},{".":24,"../../types/obstacle":49}],23:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e(".");e=e("../../types/obstacle");const o=Object.assign(new Image,{loaded:!1}),a=(o.onload=()=>o.loaded=!0,o.src="assets/images/game/objects/grenade_crate.png",Object.assign(new Image,{loaded:!1}));a.onload=()=>a.loaded=!0,a.src="assets/images/game/objects/residues/crate.svg";class i{create(e){return new r(e)}}class r extends e.Obstacle{constructor(){super(...arguments),this.type=r.TYPE}render(e,t,s,n){var i,r;o.loaded&&a.loaded&&(e=this.position.addVec(e.position.inverse()),r=(i=n*this.hitbox.width*(this.despawn?.5:1))*o.naturalWidth/o.naturalHeight,s.translate(t.width/2+e.x*n,t.height/2+e.y*n),s.rotate(-this.direction.angle()),s.drawImage(this.despawn?a:o,-i/2,-r/2,i,r),s.resetTransform())}renderMap(e,t,s){t.translate(this.position.x*s,this.position.y*s),t.fillStyle="#46502d",t.fillRect(-1.5*s,-1.5*s,3*s,3*s),t.resetTransform()}}(s.default=r).TYPE="grenade_crate",n.OBSTACLE_SUPPLIERS.set(r.TYPE,new i)},{".":24,"../../types/obstacle":49}],24:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.castMinObstacle=s.castCorrectObstacle=s.AK47Stone=s.Barrel=s.AWMCrate=s.GrenadeCrate=s.SovietCrate=s.Stone=s.MosinTree=s.Crate=s.Bush=s.Tree=s.OBSTACLE_SUPPLIERS=void 0;const n=e("../../types/math"),i=e("../../types/obstacle");s.OBSTACLE_SUPPLIERS=new Map;var r=e("./tree"),o=(Object.defineProperty(s,"Tree",{enumerable:!0,get:function(){return r.default}}),e("./bush")),a=(Object.defineProperty(s,"Bush",{enumerable:!0,get:function(){return o.default}}),e("./crate")),l=(Object.defineProperty(s,"Crate",{enumerable:!0,get:function(){return a.default}}),e("./mosin_tree")),c=(Object.defineProperty(s,"MosinTree",{enumerable:!0,get:function(){return l.default}}),e("./stone")),d=(Object.defineProperty(s,"Stone",{enumerable:!0,get:function(){return c.default}}),e("./soviet_crate")),h=(Object.defineProperty(s,"SovietCrate",{enumerable:!0,get:function(){return d.default}}),e("./grenade_crate")),u=(Object.defineProperty(s,"GrenadeCrate",{enumerable:!0,get:function(){return h.default}}),e("./awm_crate")),p=(Object.defineProperty(s,"AWMCrate",{enumerable:!0,get:function(){return u.default}}),e("./barrel")),y=(Object.defineProperty(s,"Barrel",{enumerable:!0,get:function(){return p.default}}),e("./ak47stone"));Object.defineProperty(s,"AK47Stone",{enumerable:!0,get:function(){return y.default}}),s.castCorrectObstacle=function(e){var t;return(null==(t=s.OBSTACLE_SUPPLIERS.get(e.type))?void 0:t.create(e))||new i.DummyObstacle(e)},s.castMinObstacle=function(e){return Object.assign(e,{direction:n.Vec2.ONE,hitbox:new n.CircleHitbox(0),despawn:!1,animations:[]})}},{"../../types/math":48,"../../types/obstacle":49,"./ak47stone":18,"./awm_crate":19,"./barrel":20,"./bush":21,"./crate":22,"./grenade_crate":23,"./mosin_tree":25,"./soviet_crate":26,"./stone":27,"./tree":28}],25:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=e("../../types/obstacle");const i=e("../../utils"),r=e("."),o=Object.assign(new Image,{loaded:!1}),a=(o.onload=()=>o.loaded=!0,o.src="assets/images/game/objects/mosin_tree.png",Object.assign(new Image,{loaded:!1}));a.onload=()=>a.loaded=!0,a.src="assets/images/game/objects/residues/tree.svg";class l{create(e){return new c(e)}}class c extends n.Obstacle{constructor(e){super(e),this.type=c.TYPE,this.zIndex=1e3,this.despawn&&(this.zIndex=0)}render(e,t,s,n){o.loaded&&a.loaded&&(e=this.position.addVec(e.position.inverse()),s.translate(t.width/2+e.x*n,t.height/2+e.y*n),s.rotate(-this.direction.angle()),t=this.despawn?a:o,n=(e=n*this.hitbox.comparable*2*(this.despawn?1:3.6))*t.naturalWidth/t.naturalHeight,s.drawImage(t,-e/2,-n/2,e,n),s.resetTransform())}renderMap(e,t,s){t.fillStyle="#3e502e",(0,i.circleFromCenter)(t,this.position.x*s,this.position.y*s,1.5*s*3.6)}}(s.default=c).TYPE="mosin_tree",r.OBSTACLE_SUPPLIERS.set(c.TYPE,new l)},{".":24,"../../types/obstacle":49,"../../utils":53}],26:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e(".");e=e("../../types/obstacle");const o=Object.assign(new Image,{loaded:!1}),a=(o.onload=()=>o.loaded=!0,o.src="assets/images/game/objects/soviet_crate.png",Object.assign(new Image,{loaded:!1}));a.onload=()=>a.loaded=!0,a.src="assets/images/game/objects/residues/crate.svg";class i{create(e){return new r(e)}}class r extends e.Obstacle{constructor(){super(...arguments),this.type=r.TYPE}render(e,t,s,n){var i,r;o.loaded&&a.loaded&&(e=this.position.addVec(e.position.inverse()),r=(i=n*this.hitbox.width*(this.despawn?.5:1))*o.naturalWidth/o.naturalHeight,s.translate(t.width/2+e.x*n,t.height/2+e.y*n),s.rotate(-this.direction.angle()),s.drawImage(this.despawn?a:o,-i/2,-r/2,i,r),s.resetTransform())}renderMap(e,t,s){t.translate(this.position.x*s,this.position.y*s),t.fillStyle="#683c05",t.fillRect(-2*s,-2*s,4*s,4*s),t.resetTransform()}}(s.default=r).TYPE="soviet_crate",n.OBSTACLE_SUPPLIERS.set(r.TYPE,new i)},{".":24,"../../types/obstacle":49}],27:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e(".");var i=e("../../types/obstacle");const r=e("../../utils"),o=Object.assign(new Image,{loaded:!1});o.onload=()=>o.loaded=!0,o.src="assets/images/game/objects/stone.svg";class a{create(e){return new l(e)}}class l extends i.Obstacle{constructor(){super(...arguments),this.type=l.TYPE}render(e,t,s,n){o.loaded&&(e=this.position.addVec(e.position.inverse()),s.translate(t.width/2+e.x*n,t.height/2+e.y*n),s.rotate(-this.direction.angle()),this.despawn?(t=n*this.hitbox.comparable/2,s.fillStyle="#000000",s.globalAlpha=.25,(0,r.circleFromCenter)(s,0,0,t),s.globalAlpha=1):(t=(e=n*this.hitbox.comparable*2)*o.naturalWidth/o.naturalHeight,s.drawImage(o,-e/2,-t/2,e,t)),s.resetTransform())}renderMap(e,t,s){t.fillStyle="#b3b3b3",(0,r.circleFromCenter)(t,this.position.x*s,this.position.y*s,2*s)}}(s.default=l).TYPE="stone",n.OBSTACLE_SUPPLIERS.set(l.TYPE,new a)},{".":24,"../../types/obstacle":49,"../../utils":53}],28:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=e("../../types/obstacle");const i=e("../../utils"),r=e("."),o=Object.assign(new Image,{loaded:!1}),a=(o.onload=()=>o.loaded=!0,o.src="assets/images/game/objects/tree.svg",Object.assign(new Image,{loaded:!1}));a.onload=()=>a.loaded=!0,a.src="assets/images/game/objects/residues/tree.svg";class l{create(e){return new c(e)}}class c extends n.Obstacle{constructor(e){super(e),this.type=c.TYPE,this.zIndex=1e3,this.despawn&&(this.zIndex=0)}render(e,t,s,n){o.loaded&&a.loaded&&(e=this.position.addVec(e.position.inverse()),s.translate(t.width/2+e.x*n,t.height/2+e.y*n),s.rotate(-this.direction.angle()),t=this.despawn?a:o,n=(e=n*this.hitbox.comparable*2*(this.despawn?1:3.6))*t.naturalWidth/t.naturalHeight,s.drawImage(t,-e/2,-n/2,e,n),s.resetTransform())}renderMap(e,t,s){t.fillStyle="#3e502e",(0,i.circleFromCenter)(t,this.position.x*s,this.position.y*s,1.5*s*3.6)}}(s.default=c).TYPE="tree",r.OBSTACLE_SUPPLIERS.set(c.TYPE,new l)},{".":24,"../../types/obstacle":49,"../../utils":53}],29:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.castCorrectTerrain=s.Sea=s.RiverSegment=s.River=s.Pond=s.Plain=s.TERRAIN_SUPPLIERS=void 0,s.TERRAIN_SUPPLIERS=new Map;const n=e("./plain");var i=e("./plain"),r=(Object.defineProperty(s,"Plain",{enumerable:!0,get:function(){return i.default}}),e("./pond")),o=(Object.defineProperty(s,"Pond",{enumerable:!0,get:function(){return r.default}}),e("./river")),a=(Object.defineProperty(s,"River",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(s,"RiverSegment",{enumerable:!0,get:function(){return o.RiverSegment}}),e("./sea"));Object.defineProperty(s,"Sea",{enumerable:!0,get:function(){return a.default}}),s.castCorrectTerrain=function(e){var t;return(null==(t=s.TERRAIN_SUPPLIERS.get(e.id))?void 0:t.create(e))||new n.default(e)}},{"./plain":30,"./pond":31,"./river":32,"./sea":33}],30:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e(".");class i{create(e){return new r(e)}}class r extends e("../../types/terrain").Terrain{constructor(e){super(e),this.id=r.ID,this.color=8434257}render(e,t,s,n){}renderMap(e,t,s){}}(s.default=r).ID="plain",n.TERRAIN_SUPPLIERS.set(r.ID,new i)},{".":29,"../../types/terrain":51}],31:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=e("../../types/terrain");const i=e("../../utils"),r=e(".");class o{create(e){return new a(e)}}class a extends n.DotTerrain{constructor(e){super(e),this.id=a.ID,this.color=3441067,this.secondaryColor=9461286}renderLayerN1(e,t,s,n){e=this.position.addVec(e.position.inverse());s.translate(t.width/2+e.x*n,t.height/2+e.y*n),s.fillStyle=this.colorToHex(this.secondaryColor),(0,i.circleFromCenter)(s,0,0,(this.radius+this.border)*n),s.resetTransform()}renderMapLayerN1(e,t,s){t.fillStyle=this.colorToHex(this.secondaryColor),(0,i.circleFromCenter)(t,this.position.x*s,this.position.y*s,(this.radius+this.border)*s)}}(s.default=a).ID="pond",r.TERRAIN_SUPPLIERS.set(a.ID,new o)},{".":29,"../../types/terrain":51,"../../utils":53}],32:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.RiverSegment=void 0;const l=e("../../types/math");var n=e("../../types/terrain");const i=e(".");class r{create(e){return new a(e)}}class o{create(e){return new c(e)}}class a extends n.LineTerrain{constructor(){super(...arguments),this.id=a.ID,this.color=3441067,this.secondaryColor=9461286}renderLayerN1(e,t,s,n){s.translate(t.width/2,t.height/2),s.scale(n,n),s.translate(-e.position.x,-e.position.y);var i,t=this.line.toParallel(this.range+this.border,!1),e=new l.Line(this.line.a,this.boundary.start.addVec(this.line.a),!1),r=new l.Line(this.line.b,this.boundary.end.addVec(this.line.b),!1),o=t[0].intersection(e);o&&(i=t[0].intersection(r))&&(r=t[1].intersection(r))&&(t=t[1].intersection(e))&&(s.fillStyle=this.colorToHex(this.secondaryColor),s.beginPath(),s.moveTo(o.x-1/n,o.y-1/n),s.lineTo(i.x,i.y),s.lineTo(r.x,r.y),s.lineTo(t.x-1/n,t.y-1/n),s.closePath(),s.fill(),s.resetTransform())}renderMapLayerN1(e,t,s){t.scale(s,s);var n,i=this.line.toParallel(this.range+this.border,!1),r=new l.Line(this.line.a,this.boundary.start.addVec(this.line.a),!1),o=new l.Line(this.line.b,this.boundary.end.addVec(this.line.b),!1),a=i[0].intersection(r);a&&(n=i[0].intersection(o))&&(o=i[1].intersection(o))&&(i=i[1].intersection(r))&&(t.fillStyle=this.colorToHex(this.secondaryColor),t.beginPath(),t.moveTo(a.x-1/s,a.y-1/s),t.lineTo(n.x,n.y),t.lineTo(o.x,o.y),t.lineTo(i.x-1/s,i.y-1/s),t.closePath(),t.fill(),t.resetTransform())}}(s.RiverSegment=a).ID="river_segment",i.TERRAIN_SUPPLIERS.set(a.ID,new r);class c extends n.PiecewiseTerrain{constructor(e){super(e),this.id=c.ID,this.color=4281631147,this.secondaryColor=4287651366}renderLayerN1(t,s,n,i){this.lines.forEach(e=>e.renderLayerN1(t,s,n,i))}renderMapLayerN1(t,s,n){this.lines.forEach(e=>e.renderMapLayerN1(t,s,n))}}(s.default=c).ID="river",i.TERRAIN_SUPPLIERS.set(c.ID,new o)},{".":29,"../../types/math":48,"../../types/terrain":51}],33:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e(".");class i{create(e){return new r(e)}}class r extends e("../../types/terrain").LineTerrain{constructor(){super(...arguments),this.id=r.ID,this.color=3441067}}(s.default=r).ID="sea",n.TERRAIN_SUPPLIERS.set(r.ID,new i)},{".":29,"../../types/terrain":51}],34:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e("."),y=e("../../constants"),m=e("../../types/math");var i=e("../../types/weapon");const f=e("../../utils"),g=e("../animations"),b=["left_fist","right_fist"];class r{create(){return new o}}class o extends i.Weapon{constructor(){super(...arguments),this.id=o.ID,this.name="Fists"}render(e,t,s,n){var n=n*e.hitbox.radius,i=1.2*n*y.CommonNumber.SIN45,r=m.Vec2.ONE.scaleAll(i),o=[];if(b.some(t=>e.animations.find(e=>e.id==t)))for(const u of e.animations){var a=g.DEFINED_ANIMATIONS.get(u.id);if(a){var l=b.indexOf(u.id),c=(a.duration-u.duration)/a.duration;for(let e=0;e<a.keyframes.length-1;e++)if(c>=a.keyframes[e]&&c<=a.keyframes[e+1]){var d=a.positions[e].addVec(a.positions[e+1].addVec(a.positions[e].inverse()).scaleAll((c-a.keyframes[e])/(a.keyframes[e+1]-a.keyframes[e]))).scaleAll(i);o.push(r.addVec(d));break}o.push(r.addVec(r.addAngle(y.CommonAngle.PI_TWO*(2*-l+1))))}}else o.push(r.addVec(r.addAngle(y.CommonAngle.PI_TWO))),o.push(r.addVec(r.addAngle(-y.CommonAngle.PI_TWO)));var h=n/3;s.fillStyle="#F8C675",s.lineWidth=h/3,s.strokeStyle="#000000";for(const p of o)(0,f.circleFromCenter)(s,p.x,p.y,h,!0,!0)}}(s.default=o).ID="fists",n.WEAPON_SUPPLIERS.set(o.ID,new r)},{".":44,"../../constants":2,"../../types/math":48,"../../types/weapon":52,"../../utils":53,"../animations":11}],35:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e(".."),c=e("../../../types/math");var i=e("../../../types/weapon");const d=e("../../../utils");class r{create(){return new o}}class o extends i.GrenadeWeapon{constructor(){super(...arguments),this.id=o.ID,this.name="Frag Grenade"}render(e,t,s,n){var i=n*e.hitbox.comparable/3,r=[new c.Vec2(e.hitbox.comparable,.1),new c.Vec2(e.hitbox.comparable+.25,-.1)],o=c.Vec2.ZERO;s.fillStyle="#222",s.strokeStyle="#000",s.lineWidth=.025*n,(0,d.roundRect)(s,e.hitbox.comparable*n,-.15*n,.5*n,.3*n,.15*n,!0,!0),s.fillStyle="#F8C675",s.lineWidth=i/3,s.strokeStyle="#000000";for(const l of r){var a=l.addVec(o).scaleAll(n);(0,d.circleFromCenter)(s,a.x,a.y,i,!0,!0)}}}(s.default=o).ID="frag_grenade",n.WEAPON_SUPPLIERS.set(o.ID,new r)},{"..":44,"../../../types/math":48,"../../../types/weapon":52,"../../../utils":53}],36:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e(".."),c=e("../../../types/math");var i=e("../../../types/weapon");const d=e("../../../utils");class r{create(e){return new o(e)}}class o extends i.GunWeapon{constructor(e){super(),this.id=o.ID,this.name="AK 47",e.recoil&&(this.magazine=e.magazine)}render(e,t,s,n){var i=n*e.hitbox.comparable/3,r=[new c.Vec2(e.hitbox.comparable,.1),new c.Vec2(e.hitbox.comparable+.25,-.1)],o=c.Vec2.ZERO;s.fillStyle="#222",s.strokeStyle="#000",s.lineWidth=.025*n,(0,d.roundRect)(s,e.hitbox.comparable*n,-.15*n,2*n,.3*n,.15*n,!0,!0),s.fillStyle="#F8C675",s.lineWidth=i/3,s.strokeStyle="#000000";for(const l of r){var a=l.addVec(o).scaleAll(n);(0,d.circleFromCenter)(s,a.x,a.y,i,!0,!0)}}}(s.default=o).ID="ak47",n.WEAPON_SUPPLIERS.set(o.ID,new r)},{"..":44,"../../../types/math":48,"../../../types/weapon":52,"../../../utils":53}],37:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e(".."),c=e("../../../types/math");var i=e("../../../types/weapon");const d=e("../../../utils");class r{create(e){return new o(e)}}class o extends i.GunWeapon{constructor(e){super(),this.id=o.ID,this.name="AWM-S",e.recoil&&(this.magazine=e.magazine)}render(e,t,s,n){var i=n*e.hitbox.comparable/3,r=[new c.Vec2(e.hitbox.comparable,.1),new c.Vec2(e.hitbox.comparable+.25,-.1)],o=c.Vec2.ZERO;s.fillStyle="#222",s.strokeStyle="#000",s.lineWidth=.025*n,(0,d.roundRect)(s,e.hitbox.comparable*n,-.15*n,4*n,.3*n,.15*n,!0,!0),s.fillStyle="#F8C675",s.lineWidth=i/3,s.strokeStyle="#000000";for(const l of r){var a=l.addVec(o).scaleAll(n);(0,d.circleFromCenter)(s,a.x,a.y,i,!0,!0)}}}(s.default=o).ID="awm",n.WEAPON_SUPPLIERS.set(o.ID,new r)},{"..":44,"../../../types/math":48,"../../../types/weapon":52,"../../../utils":53}],38:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e(".."),c=e("../../../types/math");var i=e("../../../types/weapon");const d=e("../../../utils");class r{create(e){return new o(e)}}class o extends i.GunWeapon{constructor(e){super(),this.id=o.ID,this.name="M1100",e.recoil&&(this.magazine=e.magazine)}render(e,t,s,n){var i=n*e.hitbox.comparable/3,r=[new c.Vec2(e.hitbox.comparable,.1),new c.Vec2(e.hitbox.comparable+.25,-.1)],o=c.Vec2.ZERO;s.fillStyle="#222",s.strokeStyle="#000",s.lineWidth=.025*n,(0,d.roundRect)(s,e.hitbox.comparable*n,-.15*n,2.2*n,.3*n,.15*n,!0,!0),s.fillStyle="#F8C675",s.lineWidth=i/3,s.strokeStyle="#000000";for(const l of r){var a=l.addVec(o).scaleAll(n);(0,d.circleFromCenter)(s,a.x,a.y,i,!0,!0)}}}(s.default=o).ID="m1100",n.WEAPON_SUPPLIERS.set(o.ID,new r)},{"..":44,"../../../types/math":48,"../../../types/weapon":52,"../../../utils":53}],39:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e(".."),c=e("../../../types/math");var i=e("../../../types/weapon");const d=e("../../../utils");class r{create(e){return new o(e)}}class o extends i.GunWeapon{constructor(e){super(),this.id=o.ID,this.name="M870",e.recoil&&(this.magazine=e.magazine)}render(e,t,s,n){var i=n*e.hitbox.comparable/3,r=[new c.Vec2(e.hitbox.comparable,.1),new c.Vec2(e.hitbox.comparable+.25,-.1)],o=c.Vec2.ZERO;s.fillStyle="#222",s.strokeStyle="#000",s.lineWidth=.025*n,(0,d.roundRect)(s,e.hitbox.comparable*n,-.15*n,2.5*n,.3*n,.15*n,!0,!0),s.fillStyle="#F8C675",s.lineWidth=i/3,s.strokeStyle="#000000";for(const l of r){var a=l.addVec(o).scaleAll(n);(0,d.circleFromCenter)(s,a.x,a.y,i,!0,!0)}}}(s.default=o).ID="m870",n.WEAPON_SUPPLIERS.set(o.ID,new r)},{"..":44,"../../../types/math":48,"../../../types/weapon":52,"../../../utils":53}],40:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e(".."),c=e("../../../types/math");var i=e("../../../types/weapon");const d=e("../../../utils");class r{create(e){return new o(e)}}class o extends i.GunWeapon{constructor(e){super(),this.id=o.ID,this.name="M9",e.recoil&&(this.magazine=(e=e).magazine,this.dual=e.dual)}render(e,t,s,n){var i=n*e.hitbox.comparable/3,r=[new c.Vec2(e.hitbox.comparable,.1),new c.Vec2(e.hitbox.comparable+.25,-.1)],o=c.Vec2.ZERO;s.fillStyle="#222",s.strokeStyle="#000",s.lineWidth=.025*n,(0,d.roundRect)(s,e.hitbox.comparable*n,-.15*n,1.2*n,.3*n,.15*n,!0,!0),s.fillStyle="#F8C675",s.lineWidth=i/3,s.strokeStyle="#000000";for(const l of r){var a=l.addVec(o).scaleAll(n);(0,d.circleFromCenter)(s,a.x,a.y,i,!0,!0)}}}(s.default=o).ID="m9",n.WEAPON_SUPPLIERS.set(o.ID,new r)},{"..":44,"../../../types/math":48,"../../../types/weapon":52,"../../../utils":53}],41:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e(".."),c=e("../../../types/math");var i=e("../../../types/weapon");const d=e("../../../utils");class r{create(e){return new o(e)}}class o extends i.GunWeapon{constructor(e){super(),this.id=o.ID,this.name="Mosin_Nagant",e.recoil&&(this.magazine=e.magazine)}render(e,t,s,n){var i=n*e.hitbox.comparable/3,r=[new c.Vec2(e.hitbox.comparable,.1),new c.Vec2(e.hitbox.comparable+.25,-.1)],o=c.Vec2.ZERO;s.fillStyle="#222",s.strokeStyle="#000",s.lineWidth=.025*n,(0,d.roundRect)(s,e.hitbox.comparable*n,-.15*n,3*n,.3*n,.15*n,!0,!0),s.fillStyle="#F8C675",s.lineWidth=i/3,s.strokeStyle="#000000";for(const l of r){var a=l.addVec(o).scaleAll(n);(0,d.circleFromCenter)(s,a.x,a.y,i,!0,!0)}}}(s.default=o).ID="mosin_nagant",n.WEAPON_SUPPLIERS.set(o.ID,new r)},{"..":44,"../../../types/math":48,"../../../types/weapon":52,"../../../utils":53}],42:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e(".."),c=e("../../../types/math");var i=e("../../../types/weapon");const d=e("../../../utils");class r{create(e){return new o(e)}}class o extends i.GunWeapon{constructor(e){super(),this.id=o.ID,this.name="MP220",e.recoil&&(this.magazine=e.magazine)}render(e,t,s,n){var i=n*e.hitbox.comparable/3,r=[new c.Vec2(e.hitbox.comparable,.1),new c.Vec2(e.hitbox.comparable+.25,-.1)],o=c.Vec2.ZERO;s.fillStyle="#222",s.strokeStyle="#000",s.lineWidth=.03*n,(0,d.roundRect)(s,e.hitbox.comparable*n,-.15*n,2*n,.5*n,.15*n,!0,!0),s.fillStyle="#F8C675",s.lineWidth=i/3,s.strokeStyle="#000000";for(const l of r){var a=l.addVec(o).scaleAll(n);(0,d.circleFromCenter)(s,a.x,a.y,i,!0,!0)}}}(s.default=o).ID="mp220",n.WEAPON_SUPPLIERS.set(o.ID,new r)},{"..":44,"../../../types/math":48,"../../../types/weapon":52,"../../../utils":53}],43:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e(".."),c=e("../../../types/math");var i=e("../../../types/weapon");const d=e("../../../utils");class r{create(e){return new o(e)}}class o extends i.GunWeapon{constructor(e){super(),this.id=o.ID,this.name="MP5",e.recoil&&(this.magazine=e.magazine)}render(e,t,s,n){var i=n*e.hitbox.comparable/3,r=[new c.Vec2(e.hitbox.comparable,.1),new c.Vec2(e.hitbox.comparable+.25,-.1)],o=c.Vec2.ZERO;s.fillStyle="#222",s.strokeStyle="#000",s.lineWidth=.025*n,(0,d.roundRect)(s,e.hitbox.comparable*n,-.15*n,1.5*n,.3*n,.15*n,!0,!0),s.fillStyle="#F8C675",s.lineWidth=i/3,s.strokeStyle="#000000";for(const l of r){var a=l.addVec(o).scaleAll(n);(0,d.circleFromCenter)(s,a.x,a.y,i,!0,!0)}}}(s.default=o).ID="mp5",n.WEAPON_SUPPLIERS.set(o.ID,new r)},{"..":44,"../../../types/math":48,"../../../types/weapon":52,"../../../utils":53}],44:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.castCorrectWeapon=s.AK47=s.AWM=s.FragGrenade=s.MP220=s.M1100=s.MP5=s.Mosin_Nagant=s.M870=s.M9=s.Fists=s.WEAPON_SUPPLIERS=void 0,s.WEAPON_SUPPLIERS=new Map;const n=e("./fists");var i=e("./fists"),r=(Object.defineProperty(s,"Fists",{enumerable:!0,get:function(){return i.default}}),e("./guns/m9")),o=(Object.defineProperty(s,"M9",{enumerable:!0,get:function(){return r.default}}),e("./guns/m870")),a=(Object.defineProperty(s,"M870",{enumerable:!0,get:function(){return o.default}}),e("./guns/mosin_nagant")),l=(Object.defineProperty(s,"Mosin_Nagant",{enumerable:!0,get:function(){return a.default}}),e("./guns/mp5")),c=(Object.defineProperty(s,"MP5",{enumerable:!0,get:function(){return l.default}}),e("./guns/m1100")),d=(Object.defineProperty(s,"M1100",{enumerable:!0,get:function(){return c.default}}),e("./guns/mp220")),h=(Object.defineProperty(s,"MP220",{enumerable:!0,get:function(){return d.default}}),e("./grenades/frag_grenade")),u=(Object.defineProperty(s,"FragGrenade",{enumerable:!0,get:function(){return h.default}}),e("./guns/awm")),p=(Object.defineProperty(s,"AWM",{enumerable:!0,get:function(){return u.default}}),e("./guns/ak47"));Object.defineProperty(s,"AK47",{enumerable:!0,get:function(){return p.default}}),s.castCorrectWeapon=function(e){var t;return(null==(t=s.WEAPON_SUPPLIERS.get(e.id))?void 0:t.create(e))||new n.default}},{"./fists":34,"./grenades/frag_grenade":35,"./guns/ak47":36,"./guns/awm":37,"./guns/m1100":38,"./guns/m870":39,"./guns/m9":40,"./guns/mosin_nagant":41,"./guns/mp220":42,"./guns/mp5":43}],45:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.getWeaponImage=void 0;e=e("./store/weapons");const n=new Map;for(const i of e.WEAPON_SUPPLIERS.keys()){const r=Object.assign(new Image,{loaded:!1});r.onload=()=>r.loaded=!0,r.src=`assets/images/game/loots/weapons/${i}.png`,n.set(i,r)}s.getWeaponImage=function(e){return n.get(e)}},{"./store/weapons":44}],46:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DefinedAnimation=void 0;s.DefinedAnimation=class{constructor(e,t,s,n,i){this.id=e,this.positions=t,this.rotations=s,this.keyframes=n,this.duration=i}}},{}],47:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DummyEntity=s.Entity=s.PartialInventory=s.Inventory=void 0;const n=e("../store/weapons"),i=e("./math"),r=e("../constants"),o=e("../store/animations");s.Inventory=class{constructor(e,t,s,n,i){this.holding=e,this.slots=t,this.weapons=s||Array(t.reduce((e,t)=>e+t)),this.ammos=n||Array(Object.keys(r.GunColor).length).fill(0),this.utilities=i||[]}};s.PartialInventory=class{constructor(e){this.holding=(0,n.castCorrectWeapon)(e.holding)}};class a{constructor(e){this.animations=[],this.zIndex=0,this.copy(e)}copy(e){var t,s;this.id=e.id,this.type=e.type,this.position=new i.Vec2(e.position.x,e.position.y),this.direction=new i.Vec2(e.direction.x,e.direction.y),"rect"===e.hitbox.type?(t=e.hitbox,this.hitbox=new i.RectHitbox(t.width,t.height)):(t=e.hitbox,this.hitbox=new i.CircleHitbox(t.radius)),this.health=this.maxHealth=100,this.despawn=e.despawn;for(const n of e.animations)o.DEFINED_ANIMATIONS.has(n)&&(s=o.DEFINED_ANIMATIONS.get(n).duration,this.animations.push({id:n,duration:s}))}renderTick(t){var s=[];for(let e=0;e<this.animations.length;e++)this.animations[e].duration-=t,this.animations[e].duration<=0&&s.push(e);for(let e=s.length-1;0<=e;e--)this.animations.splice(s[e],1)}}s.Entity=a;s.DummyEntity=class extends a{render(e,t,s,n){}}},{"../constants":2,"../store/animations":11,"../store/weapons":44,"./math":48}],48:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.MovementDirection=s.CircleHitbox=s.RectHitbox=s.Line=s.Vec2=void 0;class n{static fromMinVec2(e){return new n(e.x,e.y)}constructor(e,t){this.x=e,this.y=t}magnitudeSqr(){return this.x*this.x+this.y*this.y}magnitude(){return Math.sqrt(this.magnitudeSqr())}inverse(){return new n(-this.x,-this.y)}unit(){var e=this.magnitude();return 0===e?n.ZERO:new n(this.x/e,this.y/e)}dot(e){return this.x*e.x+this.y*e.y}angleBetween(e){return Math.acos(this.dot(e)/(this.magnitude()*e.magnitude()))}angle(){var e=Math.acos(this.x/this.magnitude());return 0<this.y?e:-e}addAngle(e){var e=this.angle()+e,t=this.magnitude();return new n(t*Math.cos(e),t*Math.sin(e))}addVec(e){return new n(this.x+e.x,this.y+e.y)}addX(e){return new n(this.x+e,this.y)}addY(e){return new n(this.x,this.y+e)}scale(e,t){return new n(this.x*e,this.y*t)}scaleAll(e){return this.scale(e,e)}projectTo(e){return e.scaleAll(this.dot(e)/e.magnitudeSqr())}distanceSqrTo(e){return this.addVec(e.inverse()).magnitudeSqr()}distanceTo(e){return Math.sqrt(this.distanceSqrTo(e))}perpendicular(){return new n(this.y,-this.x)}equals(e){return this.x===e.x&&this.y===e.y}render(e,t,s,n,i){i=i.addVec(e.position.inverse());s.translate(t.width/2+i.x*n,t.height/2+i.y*n),s.strokeStyle="#ff0000",s.lineWidth=2,s.beginPath(),s.moveTo(0,0),s.lineTo(this.x*n,this.y*n),s.stroke(),s.resetTransform()}renderPoint(e,t,s,n,i){e=i.addVec(e.position.inverse());s.translate(t.width/2+e.x*n,t.height/2+e.y*n),s.strokeStyle="#ff0000",s.lineWidth=2,s.beginPath(),s.moveTo(0,0),s.lineTo((this.x-i.x)*n,(this.y-i.y)*n),s.stroke(),s.resetTransform()}}(s.Vec2=n).ZERO=new n(0,0),n.ONE=new n(1,0);s.Line=class o{static fromMinLine(e){return new o(n.fromMinVec2(e.a),n.fromMinVec2(e.b),e.segment)}static fromPointSlope(e,t){return t=new n(e.x+1,(e.y+1)*t),new o(e,t,!1)}constructor(e,t,s){e.x<t.x?(this.a=e,this.b=t):(this.a=t,this.b=e),this.segment=void 0===s||s}direction(e){return(this.b.y-this.a.y)*(e.x-this.b.x)-(this.b.x-this.a.x)*(e.y-this.b.y)}distanceSqrTo(e){var t,s,n,i=this.toVec(),r=e.addVec(this.a.inverse());return this.segment?(s=e.addVec(this.b.inverse()),t=i.dot(s),n=i.dot(r),0<t?s.magnitude():n<0?r.magnitude():(t=this.b.y-this.a.y,s=this.a.x-this.b.x,n=(this.b.x-this.a.x)*this.a.y-(this.b.y-this.a.y)*this.a.x,Math.pow(t*e.x+s*e.y+n,2)/(t*t+s*s))):r.projectTo(i.perpendicular()).magnitudeSqr()}distanceTo(e){return Math.sqrt(this.distanceSqrTo(e))}intersects(e){var t=e.direction(this.a),s=e.direction(this.b),n=this.direction(e.a),i=this.direction(e.b);return t!=s&&n!=i||!!(0==t&&e.passthrough(this.a)||0==s&&e.passthrough(this.b)||0==n&&e.passthrough(e.a)||0==i&&e.passthrough(e.b))}passthrough(e){var t,s=this.slope();return void 0===s?!(e.x!=this.a.x||this.segment&&(e.y<Math.min(this.a.y,this.b.y)||e.y>Math.max(this.a.y,this.b.y))):(t=this.a.y-s*this.a.x,!(e.y!=s*e.x+t||this.segment&&(e.x<this.a.x||e.x>this.b.x||e.y<Math.min(this.a.y,this.b.y)||e.y>Math.max(this.a.y,this.b.y))))}leftTo(e){var t,s=this.slope();return void 0===s?e.x<this.a.x:(t=this.a.y-s*this.a.x,e.x<(e.y-t)/s)}rightTo(e){var t,s=this.slope();return void 0===s?e.x>this.a.x:(t=this.a.y-s*this.a.x,e.x>(e.y-t)/s)}slope(){if(this.b.x-this.a.x!=0)return(this.b.y-this.a.y)/(this.b.x-this.a.x)}yIntercept(){var e=this.slope();if(void 0!==e)return this.a.y-e*this.a.x}toVec(){return this.b.addVec(this.a.inverse())}toParallel(e,t){void 0===t&&(t=this.segment);var e=this.toVec().perpendicular().unit().scaleAll(e),s=new o(this.a.addVec(e),this.b.addVec(e),t),e=e.inverse();return[s,new o(this.a.addVec(e),this.b.addVec(e),t)]}intersection(e){var t;if(!(this.a.equals(e.a)&&this.b.equals(e.b)||void 0===this.yIntercept()&&void 0===e.yIntercept()))return void 0===this.yIntercept()?new n(this.a.x,e.slope()*this.a.x+e.yIntercept()):void 0===e.yIntercept()?new n(e.a.x,this.slope()*e.a.x+this.yIntercept()):(t=(e.yIntercept()-this.yIntercept())/(this.slope()-e.slope()),t=new n(t,this.slope()*t+this.yIntercept()),this.segment&&!this.passthrough(t)||e.segment&&!e.passthrough(t)?void 0:t)}};class i{constructor(e,t){this.type="rect",this.width=e,this.height=t,this.comparable=Math.sqrt(Math.pow(this.width/2,2)+Math.pow(this.height/2,2))}}(s.RectHitbox=i).ZERO=new i(0,0);class r{constructor(e){this.type="circle",this.comparable=this.radius=e}}(s.CircleHitbox=r).ZERO=new r(0),(s=s.MovementDirection||(s.MovementDirection={}))[s.RIGHT=0]="RIGHT",s[s.UP=1]="UP",s[s.LEFT=2]="LEFT",s[s.DOWN=3]="DOWN"},{}],49:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DummyObstacle=s.Obstacle=void 0;const n=e("./math"),i=e("../store/animations");class r{constructor(e){this.animations=[],this.zIndex=0,this.copy(e)}copy(e){var t;this.id=e.id,this.type=e.type,this.position=new n.Vec2(e.position.x,e.position.y),this.direction=new n.Vec2(e.direction.x,e.direction.y),"rect"===e.hitbox.type?(t=e.hitbox,this.hitbox=new n.RectHitbox(t.width,t.height)):(t=e.hitbox,this.hitbox=new n.CircleHitbox(t.radius)),this.despawn=e.despawn;for(const s of e.animations)i.DEFINED_ANIMATIONS.has(s)&&this.animations.push({id:s,duration:i.DEFINED_ANIMATIONS.get(s).duration})}renderTick(t){var s=[];for(let e=0;e<this.animations.length;e++)this.animations[e].duration-=t,this.animations[e].duration<=0&&s.push(e);for(let e=s.length-1;0<=e;e--)this.animations.splice(s[e],1)}}s.Obstacle=r;s.DummyObstacle=class extends r{render(e,t,s,n){}renderMap(e,t,s){}}},{"../store/animations":11,"./math":48}],50:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.MapPacket=s.GamePacket=s.AckPacket=s.SwitchWeaponPacket=s.InteractPacket=s.MouseMovePacket=s.MouseReleasePacket=s.MousePressPacket=s.MovementReleasePacket=s.MovementPressPacket=s.PingPacket=void 0;s.PingPacket=class{constructor(){this.type="ping"}};s.MovementPressPacket=class{constructor(e){this.type="movementpress",this.direction=e}};s.MovementReleasePacket=class{constructor(e){this.type="movementrelease",this.direction=e}};s.MousePressPacket=class{constructor(e){this.type="mousepress",this.button=e}};s.MouseReleasePacket=class{constructor(e){this.type="mouserelease",this.button=e}};s.MouseMovePacket=class{constructor(e,t){this.type="mousemove",this.x=e,this.y=t}};s.InteractPacket=class{constructor(){this.type="interact"}};s.SwitchWeaponPacket=class{constructor(e){this.type="switchweapon",this.delta=e}};s.AckPacket=class{constructor(){this.type="ack"}};s.GamePacket=class{constructor(){this.type="game"}};s.MapPacket=class{constructor(){this.type="map"}}},{}],51:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.PiecewiseTerrain=s.LineTerrain=s.DotTerrain=s.Terrain=s.World=void 0;const i=e("../store/entities"),n=e("../store/terrains"),l=e("./math"),r=e("../utils"),o=e("../store/obstacles");s.World=class{constructor(e,t){this.entities=[],this.obstacles=[],this.terrains=[],e=e||l.Vec2.ZERO,this.size=e,t=t||new n.Plain({id:"plain",border:0}),this.defaultTerrain=t}updateEntities(e){var t=[];for(const n of e){var s=this.entities.find(e=>e.id==n.id);s?(s.copy(n),t.push(s)):t.push((0,i.castCorrectEntity)(n))}this.entities=t}updateObstacles(e){var t=[];for(const n of e){var s=this.obstacles.find(e=>e.id==n.id);s?(s.copy(n),t.push(s)):t.push((0,o.castCorrectObstacle)(n))}this.obstacles=t}};class a{constructor(e){this.type="generic",this.color=0,this.id=e.id,this.border=e.border}colorToHex(e){return"#"+(e=e||this.color).toString(16)}}s.Terrain=a;s.DotTerrain=class extends a{constructor(e){super(e),this.type="dot",this.position=new l.Vec2(e.position.x,e.position.y),this.radius=e.radius}render(e,t,s,n){e=this.position.addVec(e.position.inverse());s.translate(t.width/2+e.x*n,t.height/2+e.y*n),s.fillStyle=this.colorToHex(),(0,r.circleFromCenter)(s,0,0,this.radius*n),s.resetTransform()}renderMap(e,t,s){t.fillStyle=this.colorToHex(),(0,r.circleFromCenter)(t,this.position.x*s,this.position.y*s,this.radius*s)}};s.LineTerrain=class extends a{constructor(e){super(e),this.type="line",this.line=l.Line.fromMinLine(e.line),this.range=e.range,this.boundary={start:l.Vec2.fromMinVec2(e.boundary[0]),end:l.Vec2.fromMinVec2(e.boundary[1])}}render(e,t,s,n){s.translate(t.width/2,t.height/2),s.scale(n,n),s.translate(-e.position.x,-e.position.y);var i,t=this.line.toParallel(this.range,!1),e=new l.Line(this.line.a,this.boundary.start.addVec(this.line.a),!1),r=new l.Line(this.line.b,this.boundary.end.addVec(this.line.b),!1),o=t[0].intersection(e);o&&(i=t[0].intersection(r))&&(r=t[1].intersection(r))&&(t=t[1].intersection(e))&&(s.fillStyle=this.colorToHex(),s.beginPath(),s.moveTo(o.x-1/n,o.y-1/n),s.lineTo(i.x,i.y),s.lineTo(r.x,r.y),s.lineTo(t.x-1/n,t.y-1/n),s.closePath(),s.fill(),s.resetTransform())}renderMap(e,t,s){t.scale(s,s);var n,i=this.line.toParallel(this.range,!1),r=new l.Line(this.line.a,this.boundary.start.addVec(this.line.a),!1),o=new l.Line(this.line.b,this.boundary.end.addVec(this.line.b),!1),a=i[0].intersection(r);a&&(n=i[0].intersection(o))&&(o=i[1].intersection(o))&&(i=i[1].intersection(r))&&(t.fillStyle=this.colorToHex(),t.beginPath(),t.moveTo(a.x-1/s,a.y-1/s),t.lineTo(n.x,n.y),t.lineTo(o.x,o.y),t.lineTo(i.x-1/s,i.y-1/s),t.closePath(),t.fill(),t.resetTransform())}};s.PiecewiseTerrain=class extends a{constructor(e){super(e),this.type="piecewise",this.lines=[];for(const t of e.lines)this.lines.push((0,n.castCorrectTerrain)(t))}render(t,s,n,i){this.lines.forEach(e=>e.render(t,s,n,i))}renderMap(t,s,n){this.lines.forEach(e=>e.renderMap(t,s,n))}}},{"../store/entities":16,"../store/obstacles":24,"../store/terrains":29,"../utils":53,"./math":48}],52:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DummyWeapon=s.GrenadeWeapon=s.GunWeapon=s.Weapon=void 0;class n{}s.Weapon=n;s.GunWeapon=class extends n{constructor(){super(...arguments),this.recoil="small",this.magazine=0,this.dual=-1}};s.GrenadeWeapon=class extends n{};s.DummyWeapon=class extends n{render(e,t,s,n){}}},{}],53:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.toDegrees=s.roundRect=s.lineBetween=s.circleFromCenter=s.clamp=s.wait=void 0,s.wait=function(t){return new Promise(e=>setTimeout(e,t))},s.clamp=function(e,t,s){return e<t?t:s<e?s:e},s.circleFromCenter=function(e,t,s,n,i=!0,r=!1){e.beginPath(),e.arc(t,s,n,0,2*Math.PI,!1),i&&e.fill(),r&&e.stroke()},s.lineBetween=function(e,t,s,n,i,r=!0){e.beginPath(),e.moveTo(t,s),e.lineTo(n,i),e.closePath(),r&&e.stroke()},s.roundRect=function(e,t,s,n,i,r,o=!0,a=!1){var l,c,d,h;"number"==typeof(r=void 0===r?5:r)?l=c=d=h=r:(l=r.tl||0,c=r.tr||0,h=r.br||0,d=r.bl||0),e.beginPath(),e.moveTo(t+l,s),e.lineTo(t+n-c,s),e.quadraticCurveTo(t+n,s,t+n,s+c),e.lineTo(t+n,s+i-h),e.quadraticCurveTo(t+n,s+i,t+n-h,s+i),e.lineTo(t+d,s+i),e.quadraticCurveTo(t,s+i,t,s+i-d),e.lineTo(t,s+l),e.quadraticCurveTo(t,s,t+l,s),e.closePath(),o&&e.fill(),a&&e.stroke()},s.toDegrees=function(e){return 180*e/Math.PI}},{}]},{},[3]);