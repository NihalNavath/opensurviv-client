!function s(n,r,o){function a(t,e){if(!r[t]){if(!n[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(d)return d(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}i=r[t]={exports:{}},n[t][0].call(i.exports,function(e){return a(n[t][1][e]||e)},i,i.exports,s,n,r,o)}return r[t].exports}for(var d="function"==typeof require&&require,e=0;e<o.length;e++)a(o[e]);return a}({1:[function(e,t,i){t.exports=msgpack},{}],2:[function(e,t,i){"use strict";var s,n;Object.defineProperty(i,"__esModule",{value:!0}),i.MINIMAP_SIZE=i.GRID_INTERVAL=i.movementKeys=i.KeyBind=i.CommonNumber=i.CommonAngle=void 0,(s=n=i.CommonAngle||(i.CommonAngle={}))[s.PI_FOUR=Math.PI/4]="PI_FOUR",s[s.PI_TWO=Math.PI/2]="PI_TWO",(s=i.CommonNumber||(i.CommonNumber={}))[s.SIN45=Math.sin(n.PI_FOUR)]="SIN45",(n=s=i.KeyBind||(i.KeyBind={})).MENU="Escape",n.HIDE_HUD="F1",n.WORLD_MAP="g",n.HIDE_MAP="z",n.BIG_MAP="v",n.RIGHT="d",n.UP="w",n.LEFT="a",n.DOWN="s",i.movementKeys=[s.RIGHT,s.UP,s.LEFT,s.DOWN].map(e=>e),i.GRID_INTERVAL=20,i.MINIMAP_SIZE=100},{}],3:[function(e,t,s){"use strict";var i,n,r,o,a;Object.defineProperty(s,"__esModule",{value:!0}),s.getPlayer=s.getId=s.world=void 0;const d=e("msgpack-lite"),l=e("./constants"),c=e("./renderer"),h=e("./rendering/map"),u=e("./states"),p=e("./store/entities"),y=e("./store/obstacles"),m=e("./store/terrains"),f=e("./types/math"),g=e("./types/packet"),w=e("./types/terrain");s.world=new w.World,s.getId=function(){return i};var b=!(s.getPlayer=function(){return o});let v=!1;null!=(e=document.getElementById("connect"))&&e.addEventListener("click",()=>{var e=document.getElementById("error-div"),t=(n=document.getElementById("username").value,r=document.getElementById("address").value,function(e,t){{var i;if(!e)return i=new Error("Please provide a username."),v=!0,i;if(50<e.length)return i=new Error("Username too long! Try another username."),v=!0,i}{if(!t)return e=new Error("Please provide an address."),v=!0,e;if(!t.startsWith("localhost")&&!/^(?!0)(?!.*\.$)((1?\d?\d|25[0-5]|2[0-4]\d)(\.|$)){4}$/.test(t))return e=new Error("Invalid address"),v=!0,e}}(n,r));t?(e.innerHTML=t.message,e.style.display="block"):(v&&(e.style.display="none"),(a=new WebSocket("ws://"+r)).binaryType="arraybuffer",a.onmessage=e=>{var e=(0,d.decode)(new Uint8Array(e.data));i=e.id,s.world=new w.World(new f.Vec2(e.size[0],e.size[1]),(0,m.castCorrectTerrain)(e.terrain)),a.send((0,d.encode)({username:n,id:i}).buffer),b=!0,(0,c.setRunning)(!0),(0,c.animate)(),null!=(e=document.getElementById("menu"))&&e.classList.add("hidden");const t=setInterval(()=>{b?a.send((0,d.encode)(new g.PingPacket).buffer):clearInterval(t)},1e3);a.onmessage=e=>{var t=(0,d.decode)(new Uint8Array(e.data));switch(t.type){case"game":var i=t;s.world.entities=i.entities.map(e=>(0,p.castCorrectEntity)(e)),s.world.obstacles=i.obstacles.map(e=>(0,y.castCorrectObstacle)(e)),o=new p.Player(i.player);break;case"map":i=t;s.world.terrains=i.terrains.map(e=>(0,m.castCorrectTerrain)(e)),(0,h.initMap)(i.obstacles.map(e=>(0,y.castCorrectObstacle)((0,y.castMinObstacle)(e))))}}},a.onclose=()=>{var e;(b=!1,c.setRunning)(!1),null!=(e=document.getElementById("menu"))&&e.classList.remove("hidden"),o=n=i=null,s.world=new w.World},a.onerror=()=>{})}),null!=(e=document.getElementById("disconnect"))&&e.addEventListener("click",()=>{var e;a.close(),null!=(e=document.getElementById("settings"))&&e.classList.add("hidden"),(0,u.toggleMenu)()}),window.onkeydown=e=>{var t,i;b&&!(0,u.isKeyPressed)(e.key)&&(e.stopPropagation(),(0,u.addKeyPressed)(e.key),t=document.getElementById("settings"),e.key==l.KeyBind.MENU?((0,u.isMenuHidden)()?null!=t&&t.classList.remove("hidden"):null!=t&&t.classList.add("hidden"),(0,u.toggleMenu)()):e.key==l.KeyBind.HIDE_HUD?(0,u.toggleHud)():e.key==l.KeyBind.WORLD_MAP?(0,u.toggleMap)():e.key==l.KeyBind.HIDE_MAP?(0,u.toggleMinimap)():e.key==l.KeyBind.BIG_MAP&&(0,u.toggleBigMap)(),(0,u.isMenuHidden)())&&0<=(i=l.movementKeys.indexOf(e.key))&&a.send((0,d.encode)(new g.MovementPressPacket(i)).buffer)},window.onkeyup=e=>{b&&(e.stopPropagation(),(0,u.removeKeyPressed)(e.key),0<=(e=l.movementKeys.indexOf(e.key)))&&a.send((0,d.encode)(new g.MovementReleasePacket(e)).buffer)},window.onmousemove=e=>{b&&(e.stopPropagation(),a.send((0,d.encode)(new g.MouseMovePacket(e.x-window.innerWidth/2,e.y-window.innerHeight/2)).buffer))},window.onmousedown=e=>{b&&(e.stopPropagation(),(0,u.addMousePressed)(e.button),a.send((0,d.encode)(new g.MousePressPacket(e.button))))},window.onmouseup=e=>{b&&(e.stopPropagation(),(0,u.removeMousePressed)(e.button),a.send((0,d.encode)(new g.MouseReleasePacket(e.button))))}},{"./constants":2,"./renderer":4,"./rendering/map":6,"./states":7,"./store/entities":12,"./store/obstacles":16,"./store/terrains":21,"./types/math":30,"./types/packet":32,"./types/terrain":33,"msgpack-lite":1}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.animate=i.setRunning=void 0;const l=e("./constants"),c=e("./game"),h=e("./rendering/hud"),u=e("./rendering/map"),p=e("./states"),y=e("./utils"),m=document.getElementById("game");m.width=window.innerWidth,m.height=window.innerHeight;var f=!(window.onresize=()=>{m.width=window.innerWidth,m.height=window.innerHeight});i.setRunning=function(e){f=e};const g=m.getContext("2d");i.animate=function e(){try{g.fillStyle=c.world.defaultTerrain.colorToHex(),g.fillRect(0,0,m.width,m.height);const a=(0,c.getPlayer)();if(a){const d=Math.max(m.width,m.height)/(20+20*a.scope);var t=c.world.size,i=m.width/2-a.position.x*d,s=m.height/2-a.position.y*d,n=t.x*d,r=t.y*d;c.world.terrains.filter(e=>!!e.renderLayerN1).forEach(e=>e.renderLayerN1(a,m,g,d)),c.world.terrains.forEach(e=>e.render(a,m,g,d)),g.globalAlpha=.2;for(let e=0;e<=t.x;e+=l.GRID_INTERVAL)(0,y.lineBetween)(g,m.width/2-(a.position.x-e)*d,Math.max(s,0),m.width/2-(a.position.x-e)*d,Math.min(s+r,m.height));for(let e=0;e<=t.y;e+=l.GRID_INTERVAL)(0,y.lineBetween)(g,Math.max(i,0),m.height/2-(a.position.y-e)*d,Math.min(i+n,m.width),m.height/2-(a.position.y-e)*d);g.globalAlpha=1;var o=[];(o=o.concat(c.world.entities,c.world.obstacles)).push(a),(o=o.sort((e,t)=>e.zIndex-t.zIndex)).filter(e=>!!e.renderLayerN1).forEach(e=>e.renderLayerN1(a,m,g,d)),o.forEach(e=>e.render(a,m,g,d)),g.fillStyle=c.world.defaultTerrain.colorToHex(),g.fillRect(0,0,m.width/2-a.position.x*d,m.height/2-a.position.y*d),g.fillRect(m.width,0,(c.world.size.x-a.position.x)*d-m.width/2,m.height/2-a.position.y*d),g.fillRect(0,m.height,m.width/2-a.position.x*d,(c.world.size.y-a.position.y)*d-m.height/2),g.fillRect(m.width,m.height,(c.world.size.x-a.position.x)*d-m.width/2,(c.world.size.y-a.position.y)*d-m.height/2),g.fillRect(m.width/2-a.position.x*d,0,c.world.size.x*d,m.height/2-a.position.y*d),g.fillRect(m.width/2-a.position.x*d,m.height,c.world.size.x*d,(c.world.size.y-a.position.y)*d-m.height/2),g.fillRect(0,m.height/2-a.position.y*d,m.width/2-a.position.x*d,c.world.size.y*d),g.fillRect(m.width,m.height/2-a.position.y*d,(c.world.size.x-a.position.x)*d-m.width/2,c.world.size.y*d),g.strokeStyle="#000000",g.lineWidth=d/4,g.strokeRect(i,s,n,r),(0,p.isHudHidden)()||(0,h.drawHud)(a,m,g),(0,p.isMapOpened)()?(0,u.drawMap)(m,g):(0,p.isMapHidden)()||(0,u.drawMinimap)(a,m,g)}}catch(e){console.error(e)}f&&requestAnimationFrame(e)}},{"./constants":2,"./game":3,"./rendering/hud":5,"./rendering/map":6,"./states":7,"./utils":35}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.drawHud=void 0;const d=e("../utils");i.drawHud=function(e,t,i){var s=t.width/4,n=t.height/20,r=Math.min(t.width,t.height)/100,o=s-2*r,a=n-2*r;i.fillStyle="#000000",i.globalAlpha=.2,(0,d.roundRect)(i,(t.width-s)/2,t.height-n-r,s,n,r/2),e.health==e.maxHealth?i.fillStyle="#ccc":e.health/e.maxHealth<.8?i.fillStyle="#fdd":e.health/e.maxHealth<.25?i.fillStyle="#daa":i.fillStyle="#fff",i.globalAlpha=1,(0,d.roundRect)(i,(t.width-o)/2,t.height-n,o*e.health/e.maxHealth,a,r/2)}},{"../utils":35}],6:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.drawMinimap=i.drawMap=i.initMap=void 0;const r=e("../constants"),o=e("../game"),a=e("../states"),d=e("../utils"),l=document.createElement("canvas");var c,h;const u=document.createElement("canvas");i.initMap=function(e){var t=o.world.size,i=Math.max(t.x,t.y),s=Math.min(window.screen.availWidth,window.screen.availHeight);l.width=s*t.x/i,l.height=s*t.y/i,h=s/i;const n=l.width/o.world.size.x;(c=l.getContext("2d")).fillStyle=o.world.defaultTerrain.colorToHex(),c.fillRect(0,0,l.width,l.height),o.world.terrains.filter(e=>!!e.renderMapLayerN1).forEach(e=>e.renderMapLayerN1(l,c,n)),o.world.terrains.forEach(e=>e.renderMap(l,c,n)),c.strokeStyle="#000000",c.lineWidth=1,c.globalAlpha=.2;for(let e=0;e<=t.x;e+=r.GRID_INTERVAL)(0,d.lineBetween)(c,e*s/i,0,e*s/i,l.height);for(let e=0;e<=t.y;e+=r.GRID_INTERVAL)(0,d.lineBetween)(c,0,e*s/i,l.width,e*s/i);c.globalAlpha=1,(e=e.sort((e,t)=>e.zIndex-t.zIndex)).filter(e=>!!e.renderMapLayerN1).forEach(e=>e.renderMapLayerN1(l,c,n)),e.forEach(e=>e.renderMap(l,c,n))},i.drawMap=function(e,t){var i,s,n=e.width/l.width,n=(r=e.height/l.height)*l.width>e.width?(i=e.width,s=n*l.height,e.width/o.world.size.x):(i=r*l.width,s=e.height,e.height/o.world.size.y),r=(t.drawImage(l,(e.width-i)/2,(e.height-s)/2,i,s),t.strokeStyle="#000",t.lineWidth=2,t.strokeRect((e.width-i)/2,(e.height-s)/2,i,s),(0,o.getPlayer)());t.fillStyle="#F8C675",(0,d.circleFromCenter)(t,(e.width-i)/2+r.position.x*n,(e.height-s)/2+r.position.y*n,8),(0,d.circleFromCenter)(t,(e.width-i)/2+r.position.x*n,(e.height-s)/2+r.position.y*n,12,!1,!0)},i.drawMinimap=function(e,t,i){var s=r.MINIMAP_SIZE*h*((0,a.isBigMap)()?1.5:1),n=e.position.x*h-s/2,e=e.position.y*h-s/2,n=c.getImageData(n,e,s,s),s=(u.width=u.height=s,null!=(e=u.getContext("2d"))&&e.putImageData(n,0,0),t.width/100),e=t.width/(8/((0,a.isBigMap)()?1.5:1));i.fillStyle=o.world.defaultTerrain.colorToHex(),i.fillRect(s,t.height-s-e,e,e),i.drawImage(u,s,t.height-s-e,e,e),i.strokeStyle="#000",i.lineWidth=2,i.strokeRect(s,t.height-s-e,e,e),i.fillStyle="#F8C675",(0,d.circleFromCenter)(i,s+e/2,t.height-s-e/2,8),(0,d.circleFromCenter)(i,s+e/2,t.height-s-e/2,12,!1,!0)}},{"../constants":2,"../game":3,"../states":7,"../utils":35}],7:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.toggleBigMap=i.isBigMap=i.toggleMinimap=i.isMapHidden=i.toggleMap=i.isMapOpened=i.toggleHud=i.isHudHidden=i.toggleMenu=i.isMenuHidden=i.removeMousePressed=i.addMousePressed=i.isMousePressed=i.removeKeyPressed=i.addKeyPressed=i.isKeyPressed=void 0;const s=new Map;i.isKeyPressed=function(e){return!!s.get(e)},i.addKeyPressed=function(e){s.set(e,!0)},i.removeKeyPressed=function(e){s.delete(e)};const n=new Map;i.isMousePressed=function(e){return!!n.get(e)},i.addMousePressed=function(e){n.set(e,!0)},i.removeMousePressed=function(e){n.delete(e)};var r=!0;i.isMenuHidden=function(){return r};var o=!(i.toggleMenu=function(){r=!r});i.isHudHidden=function(){return o};var a=!(i.toggleHud=function(){o=!o});i.isMapOpened=function(){return a};var d=!(i.toggleMap=function(){a=!a});i.isMapHidden=function(){return d};var l=!(i.toggleMinimap=function(){d=!d});i.isBigMap=function(){return l},i.toggleBigMap=function(){l=!l}},{}],8:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("../../types/animation"),e=e("../../types/math");const n=new s.DefinedAnimation("left_fist",[new e.Vec2(0,-1),e.Vec2.ONE,new e.Vec2(0,-1)],Array(3).fill(e.Vec2.ZERO),[0,.5,1],50),r=new s.DefinedAnimation("right_fist",[new e.Vec2(0,1),e.Vec2.ONE,new e.Vec2(0,1)],Array(3).fill(e.Vec2.ZERO),[0,.5,1],50);i.default=function(e){e.set(n.id,n),e.set(r.id,r)}},{"../../types/animation":28,"../../types/math":30}],9:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.animations=void 0;e=e("./fists");i.animations=new Map,(0,e.default)(i.animations)},{"./fists":8}],10:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});class s extends e("../../types/entity").Entity{constructor(e){super(e),this.type="bullet",this.dmg=e.dmg}render(e,t,i,s){}}i.default=s},{"../../types/entity":29}],11:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.GunColor=void 0;var s=e("../../types/entity");const r=e("../../utils"),o=new Map,a=["#F2A500","#F20000","#0061F2","#039700"];(e=i.GunColor||(i.GunColor={}))[e.YELLOW=0]="YELLOW",e[e.RED=1]="RED",e[e.BLUE=2]="BLUE",e[e.GREEN=3]="GREEN";class n extends s.Entity{constructor(e){super(e),this.type="gun",this.zIndex=8,this.name=e.name,this.color=e.color}render(e,t,i,s){var e=this.position.addVec(e.position.inverse()),n=s*this.hitbox.comparable,t=(i.translate(t.width/2+e.x*s,t.height/2+e.y*s),i.rotate(-this.direction.angle()),i.strokeStyle=a[this.color],i.lineWidth=.25*s,(0,r.circleFromCenter)(i,0,0,n,!1,!0),i.fillStyle=a[this.color]+"66",(0,r.circleFromCenter)(i,0,0,n,!0,!1),o.get(this.name));t&&i.drawImage(t,-n,-n,2*n,2*n),i.resetTransform()}}i.default=n},{"../../types/entity":29,"../../utils":35}],12:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.castCorrectEntity=i.Gun=i.Bullet=i.Player=void 0;const s=e("../../types/entity"),n=e("./bullet"),r=e("./gun"),o=e("./player");var a=e("./player"),d=(Object.defineProperty(i,"Player",{enumerable:!0,get:function(){return a.default}}),e("./bullet")),l=(Object.defineProperty(i,"Bullet",{enumerable:!0,get:function(){return d.default}}),e("./gun"));Object.defineProperty(i,"Gun",{enumerable:!0,get:function(){return l.default}}),i.castCorrectEntity=function(e){switch(e.type){case"player":return new o.default(e);case"bullet":return new n.default(e);case"gun":return new r.default(e);default:return new s.DummyEntity(e)}}},{"../../types/entity":29,"./bullet":10,"./gun":11,"./player":13}],13:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const s=e("../../types/entity"),r=e("../../utils"),o=e("../weapons"),a=Object.assign(new Image,{loaded:!1});a.onload=()=>a.loaded=!0,a.src="assets/images/game/entities/death.svg";class n extends s.Entity{constructor(e){var t;super(e),this.type="player",this.zIndex=9,this.id=e.id,this.username=e.username,this.boost=e.boost,this.scope=e.scope,"number"==typeof e.inventory.holding?(t=e.inventory.weapons[e.inventory.holding],this.inventory=new s.Inventory({holding:t})):this.inventory=new s.Inventory(e.inventory)}render(e,t,i,s){var e=this.position.addVec(e.position.inverse()),n=s*this.hitbox.comparable;i.translate(t.width/2+e.x*s,t.height/2+e.y*s),this.despawn?(i.drawImage(a,2*-n,2*-n,4*n,4*n),i.textAlign="center",i.textBaseline="top",i.font=`700 ${s}px Jura`,i.fillStyle="#60605f",i.fillText(this.username,2,2*n+2),i.fillStyle="#80807f",i.fillText(this.username,0,2*n)):(i.rotate(-this.direction.angle()),i.fillStyle="#F8C675",(0,r.circleFromCenter)(i,0,0,n),(this.inventory.holding||new o.Fists).render(this,t,i,s)),i.resetTransform()}}i.default=n},{"../../types/entity":29,"../../utils":35,"../weapons":27}],14:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("../../types/obstacle");const n=e("../../utils"),r=Object.assign(new Image,{loaded:!1}),o=(r.onload=()=>r.loaded=!0,r.src="assets/images/game/objects/bush.svg",Object.assign(new Image,{loaded:!1}));o.onload=()=>o.loaded=!0,o.src="assets/images/game/objects/residues/bush.svg";class a extends s.Obstacle{constructor(e){super(e),this.type="bush",this.zIndex=10,this.despawn&&(this.zIndex=0)}render(e,t,i,s){r.loaded&&o.loaded&&(e=this.position.addVec(e.position.inverse()),i.translate(t.width/2+e.x*s,t.height/2+e.y*s),i.rotate(-this.direction.angle()),t=this.despawn?o:r,s=(e=s*this.hitbox.comparable*2*(this.despawn?.5:1))*t.naturalWidth/t.naturalHeight,i.drawImage(t,-e/2,-s/2,e,s),i.resetTransform())}renderMap(e,t,i){t.fillStyle="#005f00",(0,n.circleFromCenter)(t,this.position.x*i,this.position.y*i,2*i)}}i.default=a},{"../../types/obstacle":31,"../../utils":35}],15:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});e=e("../../types/obstacle");const o=Object.assign(new Image,{loaded:!1}),a=(o.onload=()=>o.loaded=!0,o.src="assets/images/game/objects/crate.svg",Object.assign(new Image,{loaded:!1}));a.onload=()=>a.loaded=!0,a.src="assets/images/game/objects/residues/crate.svg";class s extends e.Obstacle{constructor(){super(...arguments),this.type="crate"}render(e,t,i,s){var n,r;o.loaded&&a.loaded&&(e=this.position.addVec(e.position.inverse()),r=(n=s*this.hitbox.width*(this.despawn?.5:1))*o.naturalWidth/o.naturalHeight,i.translate(t.width/2+e.x*s,t.height/2+e.y*s),i.rotate(-this.direction.angle()),i.drawImage(this.despawn?a:o,-n/2,-r/2,n,r),i.resetTransform())}renderMap(e,t,i){t.translate(this.position.x*i,this.position.y*i),t.fillStyle="#683c05",t.fillRect(-2*i,-2*i,4*i,4*i),t.resetTransform()}}i.default=s},{"../../types/obstacle":31}],16:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.castMinObstacle=i.castCorrectObstacle=i.soviet_Crate=i.Stone=i.mosin_Tree=i.Crate=i.Bush=i.Tree=void 0;const s=e("../../types/math"),n=e("../../types/obstacle"),r=e("./bush"),o=e("./crate"),a=e("./stone"),d=e("./tree"),l=e("./mosin_tree"),c=e("./soviet_crate");var h=e("./tree"),u=(Object.defineProperty(i,"Tree",{enumerable:!0,get:function(){return h.default}}),e("./bush")),p=(Object.defineProperty(i,"Bush",{enumerable:!0,get:function(){return u.default}}),e("./crate")),y=(Object.defineProperty(i,"Crate",{enumerable:!0,get:function(){return p.default}}),e("./mosin_tree")),m=(Object.defineProperty(i,"mosin_Tree",{enumerable:!0,get:function(){return y.default}}),e("./stone")),f=(Object.defineProperty(i,"Stone",{enumerable:!0,get:function(){return m.default}}),e("./soviet_crate"));Object.defineProperty(i,"soviet_Crate",{enumerable:!0,get:function(){return f.default}}),i.castCorrectObstacle=function(e){switch(e.type){case"tree":return new d.default(e);case"bush":return new r.default(e);case"crate":return new o.default(e);case"stone":return new a.default(e);case"mosin_tree":return new l.default(e);case"soviet_crate":return new c.default(e);default:return new n.DummyObstacle(e)}},i.castMinObstacle=function(e){return Object.assign(e,{direction:s.Vec2.ONE,hitbox:new s.CircleHitbox(0),despawn:!1})}},{"../../types/math":30,"../../types/obstacle":31,"./bush":14,"./crate":15,"./mosin_tree":17,"./soviet_crate":18,"./stone":19,"./tree":20}],17:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("../../types/obstacle");const n=e("../../utils"),r=Object.assign(new Image,{loaded:!1}),o=(r.onload=()=>r.loaded=!0,r.src="assets/images/game/objects/mosin_tree.png",Object.assign(new Image,{loaded:!1}));o.onload=()=>o.loaded=!0,o.src="assets/images/game/objects/residues/tree.svg";class a extends s.Obstacle{constructor(e){super(e),this.type="mosin_tree",this.zIndex=1e3,this.despawn&&(this.zIndex=0)}render(e,t,i,s){r.loaded&&o.loaded&&(e=this.position.addVec(e.position.inverse()),i.translate(t.width/2+e.x*s,t.height/2+e.y*s),i.rotate(-this.direction.angle()),t=this.despawn?o:r,s=(e=s*this.hitbox.comparable*2*(this.despawn?1:3.6))*t.naturalWidth/t.naturalHeight,i.drawImage(t,-e/2,-s/2,e,s),i.resetTransform())}renderMap(e,t,i){t.fillStyle="#3e502e",(0,n.circleFromCenter)(t,this.position.x*i,this.position.y*i,1.5*i*3.6)}}i.default=a},{"../../types/obstacle":31,"../../utils":35}],18:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});e=e("../../types/obstacle");const o=Object.assign(new Image,{loaded:!1}),a=(o.onload=()=>o.loaded=!0,o.src="assets/images/game/objects/soviet_crate.png",Object.assign(new Image,{loaded:!1}));a.onload=()=>a.loaded=!0,a.src="assets/images/game/objects/residues/crate.svg";class s extends e.Obstacle{constructor(){super(...arguments),this.type="soviet_crate"}render(e,t,i,s){var n,r;o.loaded&&a.loaded&&(e=this.position.addVec(e.position.inverse()),r=(n=s*this.hitbox.width*(this.despawn?.5:1))*o.naturalWidth/o.naturalHeight,i.translate(t.width/2+e.x*s,t.height/2+e.y*s),i.rotate(-this.direction.angle()),i.drawImage(this.despawn?a:o,-n/2,-r/2,n,r),i.resetTransform())}renderMap(e,t,i){t.translate(this.position.x*i,this.position.y*i),t.fillStyle="#683c05",t.fillRect(-2*i,-2*i,4*i,4*i),t.resetTransform()}}i.default=s},{"../../types/obstacle":31}],19:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("../../types/obstacle");const n=e("../../utils"),r=Object.assign(new Image,{loaded:!1});r.onload=()=>r.loaded=!0,r.src="assets/images/game/objects/stone.svg";class o extends s.Obstacle{constructor(){super(...arguments),this.type="stone"}render(e,t,i,s){r.loaded&&(e=this.position.addVec(e.position.inverse()),i.translate(t.width/2+e.x*s,t.height/2+e.y*s),i.rotate(-this.direction.angle()),this.despawn?(t=s*this.hitbox.comparable/2,i.fillStyle="#000000",i.globalAlpha=.25,(0,n.circleFromCenter)(i,0,0,t),i.globalAlpha=1):(t=(e=s*this.hitbox.comparable*2)*r.naturalWidth/r.naturalHeight,i.drawImage(r,-e/2,-t/2,e,t)),i.resetTransform())}renderMap(e,t,i){t.fillStyle="#b3b3b3",(0,n.circleFromCenter)(t,this.position.x*i,this.position.y*i,2*i)}}i.default=o},{"../../types/obstacle":31,"../../utils":35}],20:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("../../types/obstacle");const n=e("../../utils"),r=Object.assign(new Image,{loaded:!1}),o=(r.onload=()=>r.loaded=!0,r.src="assets/images/game/objects/tree.svg",Object.assign(new Image,{loaded:!1}));o.onload=()=>o.loaded=!0,o.src="assets/images/game/objects/residues/tree.svg";class a extends s.Obstacle{constructor(e){super(e),this.type="tree",this.zIndex=1e3,this.despawn&&(this.zIndex=0)}render(e,t,i,s){r.loaded&&o.loaded&&(e=this.position.addVec(e.position.inverse()),i.translate(t.width/2+e.x*s,t.height/2+e.y*s),i.rotate(-this.direction.angle()),t=this.despawn?o:r,s=(e=s*this.hitbox.comparable*2*(this.despawn?1:3.6))*t.naturalWidth/t.naturalHeight,i.drawImage(t,-e/2,-s/2,e,s),i.resetTransform())}renderMap(e,t,i){t.fillStyle="#3e502e",(0,n.circleFromCenter)(t,this.position.x*i,this.position.y*i,1.5*i*3.6)}}i.default=a},{"../../types/obstacle":31,"../../utils":35}],21:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.castCorrectTerrain=i.Sea=i.RiverSegment=i.River=i.Pond=i.Plain=void 0;const s=e("./plain"),n=e("./pond"),r=e("./river"),o=e("./sea");var a=e("./plain"),d=(Object.defineProperty(i,"Plain",{enumerable:!0,get:function(){return a.default}}),e("./pond")),l=(Object.defineProperty(i,"Pond",{enumerable:!0,get:function(){return d.default}}),e("./river")),c=(Object.defineProperty(i,"River",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(i,"RiverSegment",{enumerable:!0,get:function(){return l.RiverSegment}}),e("./sea"));Object.defineProperty(i,"Sea",{enumerable:!0,get:function(){return c.default}}),i.castCorrectTerrain=function(e){switch(e.id){case"plain":return new s.default(e);case"pond":return new n.default(e);case"river_segment":return new r.RiverSegment(e);case"river":return new r.default(e);case"sea":return new o.default(e);default:return new s.default(e)}}},{"./plain":22,"./pond":23,"./river":24,"./sea":25}],22:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});class s extends e("../../types/terrain").Terrain{constructor(e){super(e),this.color=8434257}render(e,t,i,s){}renderMap(e,t,i){}}i.default=s},{"../../types/terrain":33}],23:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("../../types/terrain");const n=e("../../utils");class r extends s.DotTerrain{constructor(e){super(e),this.id="pond",this.color=3441067,this.secondaryColor=9461286}renderLayerN1(e,t,i,s){e=this.position.addVec(e.position.inverse());i.translate(t.width/2+e.x*s,t.height/2+e.y*s),i.fillStyle=this.colorToHex(this.secondaryColor),(0,n.circleFromCenter)(i,0,0,(this.radius+this.border)*s),i.resetTransform()}renderMapLayerN1(e,t,i){t.fillStyle=this.colorToHex(this.secondaryColor),(0,n.circleFromCenter)(t,this.position.x*i,this.position.y*i,(this.radius+this.border)*i)}}i.default=r},{"../../types/terrain":33,"../../utils":35}],24:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.RiverSegment=void 0;const d=e("../../types/math");e=e("../../types/terrain");class s extends e.LineTerrain{constructor(){super(...arguments),this.id="river_segment",this.color=3441067,this.secondaryColor=9461286}renderLayerN1(e,t,i,s){i.translate(t.width/2,t.height/2),i.scale(s,s),i.translate(-e.position.x,-e.position.y);var n,t=this.line.toParallel(this.range+this.border,!1),e=new d.Line(this.line.a,this.boundary.start.addVec(this.line.a),!1),r=new d.Line(this.line.b,this.boundary.end.addVec(this.line.b),!1),o=t[0].intersection(e);o&&(n=t[0].intersection(r))&&(r=t[1].intersection(r))&&(t=t[1].intersection(e))&&(i.fillStyle=this.colorToHex(this.secondaryColor),i.beginPath(),i.moveTo(o.x-1/s,o.y-1/s),i.lineTo(n.x,n.y),i.lineTo(r.x,r.y),i.lineTo(t.x-1/s,t.y-1/s),i.closePath(),i.fill(),i.resetTransform())}renderMapLayerN1(e,t,i){t.scale(i,i);var s,n=this.line.toParallel(this.range+this.border,!1),r=new d.Line(this.line.a,this.boundary.start.addVec(this.line.a),!1),o=new d.Line(this.line.b,this.boundary.end.addVec(this.line.b),!1),a=n[0].intersection(r);a&&(s=n[0].intersection(o))&&(o=n[1].intersection(o))&&(n=n[1].intersection(r))&&(t.fillStyle=this.colorToHex(this.secondaryColor),t.beginPath(),t.moveTo(a.x-1/i,a.y-1/i),t.lineTo(s.x,s.y),t.lineTo(o.x,o.y),t.lineTo(n.x-1/i,n.y-1/i),t.closePath(),t.fill(),t.resetTransform())}}i.RiverSegment=s;class n extends e.PiecewiseTerrain{constructor(e){super(e),this.id="river",this.color=4281631147,this.secondaryColor=4287651366}renderLayerN1(t,i,s,n){this.lines.forEach(e=>e.renderLayerN1(t,i,s,n))}renderMapLayerN1(t,i,s){this.lines.forEach(e=>e.renderMapLayerN1(t,i,s))}}i.default=n},{"../../types/math":30,"../../types/terrain":33}],25:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});class s extends e("../../types/terrain").LineTerrain{constructor(){super(...arguments),this.id="sea",this.color=3441067}}i.default=s},{"../../types/terrain":33}],26:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const p=e("../../constants"),y=e("../../types/math");var s=e("../../types/weapon");const m=e("../../utils"),f=e("../animations"),g=["left_fist","right_fist"];class n extends s.Weapon{constructor(){super({id:"fists",name:"Fists"})}render(e,t,i,s){var s=s*e.hitbox.radius,n=1.2*s*p.CommonNumber.SIN45,r=y.Vec2.ONE.scaleAll(n),o=[],a=f.animations.get(e.animation.name);if(a){var d=g.indexOf(e.animation.name),l=(a.duration-e.animation.duration)/a.duration;for(let e=0;e<a.keyframes.length-1;e++)if(l>=a.keyframes[e]&&l<=a.keyframes[e+1]){var c=a.positions[e].addVec(a.positions[e+1].addVec(a.positions[e].inverse()).scaleAll((l-a.keyframes[e])/(a.keyframes[e+1]-a.keyframes[e]))).scaleAll(n);o.push(r.addVec(c));break}o.push(r.addVec(r.addAngle(p.CommonAngle.PI_TWO*(2*-d+1))))}else o.push(r.addVec(r.addAngle(p.CommonAngle.PI_TWO))),o.push(r.addVec(r.addAngle(-p.CommonAngle.PI_TWO)));var h=s/3;i.lineWidth=h/3,i.strokeStyle="#000000",i.rotate(2*e.direction.angle());for(const u of o)(0,m.circleFromCenter)(i,u.x,u.y,h,!0,!0)}}i.default=n},{"../../constants":2,"../../types/math":30,"../../types/weapon":34,"../../utils":35,"../animations":9}],27:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.castCorrectWeapon=i.Fists=void 0;const s=e("../../types/weapon"),n=e("./fists");var r=e("./fists");Object.defineProperty(i,"Fists",{enumerable:!0,get:function(){return r.default}}),i.castCorrectWeapon=function(e){return"fists"!==e.id?new s.DummyWeapon(e):new n.default}},{"../../types/weapon":34,"./fists":26}],28:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DefinedAnimation=void 0;i.DefinedAnimation=class{constructor(e,t,i,s,n){this.id=e,this.positions=t,this.rotations=i,this.keyframes=s,this.duration=n}}},{}],29:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DummyEntity=i.Entity=i.Inventory=void 0;const s=e("../store/weapons"),n=e("./math");i.Inventory=class{constructor(e){this.holding=(0,s.castCorrectWeapon)(e.holding)}};class r{constructor(e){var t;this.zIndex=0,this.type=e.type,this.position=new n.Vec2(e.position.x,e.position.y),this.direction=new n.Vec2(e.direction.x,e.direction.y),"rect"===e.hitbox.type?(t=e.hitbox,this.hitbox=new n.RectHitbox(t.width,t.height)):(t=e.hitbox,this.hitbox=new n.CircleHitbox(t.radius)),this.animation=e.animation,this.health=this.maxHealth=100,this.despawn=e.despawn}}i.Entity=r;i.DummyEntity=class extends r{render(e,t,i,s){}}},{"../store/weapons":27,"./math":30}],30:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MovementDirection=i.CircleHitbox=i.RectHitbox=i.Line=i.Vec2=void 0;class s{static fromMinVec2(e){return new s(e.x,e.y)}constructor(e,t){this.x=e,this.y=t}magnitudeSqr(){return this.x*this.x+this.y*this.y}magnitude(){return Math.sqrt(this.magnitudeSqr())}inverse(){return new s(-this.x,-this.y)}unit(){var e=this.magnitude();return 0===e?s.ZERO:new s(this.x/e,this.y/e)}dot(e){return this.x*e.x+this.y*e.y}angleBetween(e){return Math.acos(this.dot(e)/(this.magnitude()*e.magnitude()))}angle(){var e=Math.acos(this.x/this.magnitude());return 0<this.y?e:-e}addAngle(e){var e=this.angle()+e,t=this.magnitude();return new s(t*Math.cos(e),t*Math.sin(e))}addVec(e){return new s(this.x+e.x,this.y+e.y)}addX(e){return new s(this.x+e,this.y)}addY(e){return new s(this.x,this.y+e)}scale(e,t){return new s(this.x*e,this.y*t)}scaleAll(e){return this.scale(e,e)}projectTo(e){return e.scaleAll(this.dot(e)/e.magnitudeSqr())}distanceSqrTo(e){return this.addVec(e.inverse()).magnitudeSqr()}distanceTo(e){return Math.sqrt(this.distanceSqrTo(e))}perpendicular(){return new s(this.y,-this.x)}equals(e){return this.x===e.x&&this.y===e.y}render(e,t,i,s,n){n=n.addVec(e.position.inverse());i.translate(t.width/2+n.x*s,t.height/2+n.y*s),i.strokeStyle="#ff0000",i.lineWidth=2,i.beginPath(),i.moveTo(0,0),i.lineTo(this.x*s,this.y*s),i.stroke(),i.resetTransform()}renderPoint(e,t,i,s,n){e=n.addVec(e.position.inverse());i.translate(t.width/2+e.x*s,t.height/2+e.y*s),i.strokeStyle="#ff0000",i.lineWidth=2,i.beginPath(),i.moveTo(0,0),i.lineTo((this.x-n.x)*s,(this.y-n.y)*s),i.stroke(),i.resetTransform()}}(i.Vec2=s).ZERO=new s(0,0),s.ONE=new s(1,0);i.Line=class o{static fromMinLine(e){return new o(s.fromMinVec2(e.a),s.fromMinVec2(e.b),e.segment)}static fromPointSlope(e,t){return t=new s(e.x+1,(e.y+1)*t),new o(e,t,!1)}constructor(e,t,i){e.x<t.x?(this.a=e,this.b=t):(this.a=t,this.b=e),this.segment=void 0===i||i}direction(e){return(this.b.y-this.a.y)*(e.x-this.b.x)-(this.b.x-this.a.x)*(e.y-this.b.y)}distanceSqrTo(e){var t,i,s,n=this.toVec(),r=e.addVec(this.a.inverse());return this.segment?(i=e.addVec(this.b.inverse()),t=n.dot(i),s=n.dot(r),0<t?i.magnitude():s<0?r.magnitude():(t=this.b.y-this.a.y,i=this.a.x-this.b.x,s=(this.b.x-this.a.x)*this.a.y-(this.b.y-this.a.y)*this.a.x,Math.pow(t*e.x+i*e.y+s,2)/(t*t+i*i))):r.projectTo(n.perpendicular()).magnitudeSqr()}distanceTo(e){return Math.sqrt(this.distanceSqrTo(e))}intersects(e){var t=e.direction(this.a),i=e.direction(this.b),s=this.direction(e.a),n=this.direction(e.b);return t!=i&&s!=n||!!(0==t&&e.passthrough(this.a)||0==i&&e.passthrough(this.b)||0==s&&e.passthrough(e.a)||0==n&&e.passthrough(e.b))}passthrough(e){var t,i=this.slope();return void 0===i?!(e.x!=this.a.x||this.segment&&(e.y<Math.min(this.a.y,this.b.y)||e.y>Math.max(this.a.y,this.b.y))):(t=this.a.y-i*this.a.x,!(e.y!=i*e.x+t||this.segment&&(e.x<this.a.x||e.x>this.b.x||e.y<Math.min(this.a.y,this.b.y)||e.y>Math.max(this.a.y,this.b.y))))}leftTo(e){var t,i=this.slope();return void 0===i?e.x<this.a.x:(t=this.a.y-i*this.a.x,e.x<(e.y-t)/i)}rightTo(e){var t,i=this.slope();return void 0===i?e.x>this.a.x:(t=this.a.y-i*this.a.x,e.x>(e.y-t)/i)}slope(){if(this.b.x-this.a.x!=0)return(this.b.y-this.a.y)/(this.b.x-this.a.x)}yIntercept(){var e=this.slope();if(void 0!==e)return this.a.y-e*this.a.x}toVec(){return this.b.addVec(this.a.inverse())}toParallel(e,t){void 0===t&&(t=this.segment);var e=this.toVec().perpendicular().unit().scaleAll(e),i=new o(this.a.addVec(e),this.b.addVec(e),t),e=e.inverse();return[i,new o(this.a.addVec(e),this.b.addVec(e),t)]}intersection(e){var t;if(!(this.a.equals(e.a)&&this.b.equals(e.b)||void 0===this.yIntercept()&&void 0===e.yIntercept()))return void 0===this.yIntercept()?new s(this.a.x,e.slope()*this.a.x+e.yIntercept()):void 0===e.yIntercept()?new s(e.a.x,this.slope()*e.a.x+this.yIntercept()):(t=(e.yIntercept()-this.yIntercept())/(this.slope()-e.slope()),t=new s(t,this.slope()*t+this.yIntercept()),this.segment&&!this.passthrough(t)||e.segment&&!e.passthrough(t)?void 0:t)}};class n{constructor(e,t){this.type="rect",this.width=e,this.height=t,this.comparable=Math.sqrt(Math.pow(this.width/2,2)+Math.pow(this.height/2,2))}}(i.RectHitbox=n).ZERO=new n(0,0);class r{constructor(e){this.type="circle",this.comparable=this.radius=e}}(i.CircleHitbox=r).ZERO=new r(0),(i=i.MovementDirection||(i.MovementDirection={}))[i.RIGHT=0]="RIGHT",i[i.UP=1]="UP",i[i.LEFT=2]="LEFT",i[i.DOWN=3]="DOWN"},{}],31:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DummyObstacle=i.Obstacle=void 0;const s=e("./math");class n{constructor(e){var t;this.type="",this.zIndex=0,this.type=e.type,this.position=new s.Vec2(e.position.x,e.position.y),this.direction=new s.Vec2(e.direction.x,e.direction.y),"rect"===e.hitbox.type?(t=e.hitbox,this.hitbox=new s.RectHitbox(t.width,t.height)):(t=e.hitbox,this.hitbox=new s.CircleHitbox(t.radius)),this.despawn=e.despawn}}i.Obstacle=n;i.DummyObstacle=class extends n{render(e,t,i,s){}renderMap(e,t,i){}}},{"./math":30}],32:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MapPacket=i.GamePacket=i.AckPacket=i.MouseMovePacket=i.MouseReleasePacket=i.MousePressPacket=i.MovementReleasePacket=i.MovementPressPacket=i.PingPacket=void 0;i.PingPacket=class{constructor(){this.type="ping"}};i.MovementPressPacket=class{constructor(e){this.type="movementpress",this.direction=e}};i.MovementReleasePacket=class{constructor(e){this.type="movementrelease",this.direction=e}};i.MousePressPacket=class{constructor(e){this.type="mousepress",this.button=e}};i.MouseReleasePacket=class{constructor(e){this.type="mouserelease",this.button=e}};i.MouseMovePacket=class{constructor(e,t){this.type="mousemove",this.x=e,this.y=t}};i.AckPacket=class{constructor(){this.type="ack"}};i.GamePacket=class{constructor(){this.type="game"}};i.MapPacket=class{constructor(){this.type="map"}}},{}],33:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PiecewiseTerrain=i.LineTerrain=i.DotTerrain=i.Terrain=i.World=void 0;const s=e("../store/terrains"),d=e("./math"),n=e("../utils");i.World=class{constructor(e,t){this.entities=[],this.obstacles=[],this.terrains=[],e=e||d.Vec2.ZERO,this.size=e,t=t||new s.Plain({id:"plain",border:0}),this.defaultTerrain=t}};class r{constructor(e){this.type="generic",this.color=0,this.id=e.id,this.border=e.border}colorToHex(e){return"#"+(e=e||this.color).toString(16)}}i.Terrain=r;i.DotTerrain=class extends r{constructor(e){super(e),this.type="dot",this.position=new d.Vec2(e.position.x,e.position.y),this.radius=e.radius}render(e,t,i,s){e=this.position.addVec(e.position.inverse());i.translate(t.width/2+e.x*s,t.height/2+e.y*s),i.fillStyle=this.colorToHex(),(0,n.circleFromCenter)(i,0,0,this.radius*s),i.resetTransform()}renderMap(e,t,i){t.fillStyle=this.colorToHex(),(0,n.circleFromCenter)(t,this.position.x*i,this.position.y*i,this.radius*i)}};i.LineTerrain=class extends r{constructor(e){super(e),this.type="line",this.line=d.Line.fromMinLine(e.line),this.range=e.range,this.boundary={start:d.Vec2.fromMinVec2(e.boundary[0]),end:d.Vec2.fromMinVec2(e.boundary[1])}}render(e,t,i,s){i.translate(t.width/2,t.height/2),i.scale(s,s),i.translate(-e.position.x,-e.position.y);var n,t=this.line.toParallel(this.range,!1),e=new d.Line(this.line.a,this.boundary.start.addVec(this.line.a),!1),r=new d.Line(this.line.b,this.boundary.end.addVec(this.line.b),!1),o=t[0].intersection(e);o&&(n=t[0].intersection(r))&&(r=t[1].intersection(r))&&(t=t[1].intersection(e))&&(i.fillStyle=this.colorToHex(),i.beginPath(),i.moveTo(o.x-1/s,o.y-1/s),i.lineTo(n.x,n.y),i.lineTo(r.x,r.y),i.lineTo(t.x-1/s,t.y-1/s),i.closePath(),i.fill(),i.resetTransform())}renderMap(e,t,i){t.scale(i,i);var s,n=this.line.toParallel(this.range,!1),r=new d.Line(this.line.a,this.boundary.start.addVec(this.line.a),!1),o=new d.Line(this.line.b,this.boundary.end.addVec(this.line.b),!1),a=n[0].intersection(r);a&&(s=n[0].intersection(o))&&(o=n[1].intersection(o))&&(n=n[1].intersection(r))&&(t.fillStyle=this.colorToHex(),t.beginPath(),t.moveTo(a.x-1/i,a.y-1/i),t.lineTo(s.x,s.y),t.lineTo(o.x,o.y),t.lineTo(n.x-1/i,n.y-1/i),t.closePath(),t.fill(),t.resetTransform())}};i.PiecewiseTerrain=class extends r{constructor(e){super(e),this.type="piecewise",this.lines=[];for(const t of e.lines)this.lines.push((0,s.castCorrectTerrain)(t))}render(t,i,s,n){this.lines.forEach(e=>e.render(t,i,s,n))}renderMap(t,i,s){this.lines.forEach(e=>e.renderMap(t,i,s))}}},{"../store/terrains":21,"../utils":35,"./math":30}],34:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DummyWeapon=i.Weapon=void 0;class s{constructor(e){this.id=e.id,this.name=e.name}}i.Weapon=s;i.DummyWeapon=class extends s{render(e,t,i,s){}}},{}],35:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.toDegrees=i.roundRect=i.lineBetween=i.circleFromCenter=i.clamp=i.wait=void 0,i.wait=function(t){return new Promise(e=>setTimeout(e,t))},i.clamp=function(e,t,i){return e<t?t:i<e?i:e},i.circleFromCenter=function(e,t,i,s,n=!0,r=!1){e.beginPath(),e.arc(t,i,s,0,2*Math.PI,!1),n&&e.fill(),r&&e.stroke()},i.lineBetween=function(e,t,i,s,n,r=!0){e.beginPath(),e.moveTo(t,i),e.lineTo(s,n),e.closePath(),r&&e.stroke()},i.roundRect=function(e,t,i,s,n,r,o=!0,a=!1){var d,l,c,h;"number"==typeof(r=void 0===r?5:r)?d=l=c=h=r:(d=r.tl||0,l=r.tr||0,h=r.br||0,c=r.bl||0),e.beginPath(),e.moveTo(t+d,i),e.lineTo(t+s-l,i),e.quadraticCurveTo(t+s,i,t+s,i+l),e.lineTo(t+s,i+n-h),e.quadraticCurveTo(t+s,i+n,t+s-h,i+n),e.lineTo(t+c,i+n),e.quadraticCurveTo(t,i+n,t,i+n-c),e.lineTo(t,i+d),e.quadraticCurveTo(t,i,t+d,i),e.closePath(),o&&e.fill(),a&&e.stroke()},i.toDegrees=function(e){return 180*e/Math.PI}},{}]},{},[3]);
!function n(s,r,o){function a(t,e){if(!r[t]){if(!s[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(d)return d(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}i=r[t]={exports:{}},s[t][0].call(i.exports,function(e){return a(s[t][1][e]||e)},i,i.exports,n,s,r,o)}return r[t].exports}for(var d="function"==typeof require&&require,e=0;e<o.length;e++)a(o[e]);return a}({1:[function(e,t,i){t.exports=msgpack},{}],2:[function(e,t,i){"use strict";var n,s;Object.defineProperty(i,"__esModule",{value:!0}),i.TIMEOUT=i.MINIMAP_SIZE=i.GRID_INTERVAL=i.movementKeys=i.KeyBind=i.CommonNumber=i.CommonAngle=void 0,(n=s=i.CommonAngle||(i.CommonAngle={}))[n.PI_FOUR=Math.PI/4]="PI_FOUR",n[n.PI_TWO=Math.PI/2]="PI_TWO",(n=i.CommonNumber||(i.CommonNumber={}))[n.SIN45=Math.sin(s.PI_FOUR)]="SIN45",(s=n=i.KeyBind||(i.KeyBind={})).MENU="Escape",s.HIDE_HUD="F1",s.WORLD_MAP="g",s.HIDE_MAP="z",s.BIG_MAP="v",s.RIGHT="d",s.UP="w",s.LEFT="a",s.DOWN="s",i.movementKeys=[n.RIGHT,n.UP,n.LEFT,n.DOWN].map(e=>e),i.GRID_INTERVAL=20,i.MINIMAP_SIZE=100,i.TIMEOUT=1e4},{}],3:[function(e,t,s){"use strict";var r,o,n,a,d,l=this&&this.__awaiter||function(e,o,a,d){return new(a=a||Promise)(function(i,t){function n(e){try{r(d.next(e))}catch(e){t(e)}}function s(e){try{r(d.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?i(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,s)}r((d=d.apply(e,o||[])).next())})};Object.defineProperty(s,"__esModule",{value:!0}),s.getPlayer=s.getId=s.world=void 0;const c=e("msgpack-lite"),h=e("./constants"),u=e("./renderer"),y=e("./rendering/map"),p=e("./states"),m=e("./store/entities"),f=e("./store/obstacles"),g=e("./store/terrains"),w=e("./types/math"),b=e("./types/packet"),v=e("./types/terrain");s.world=new v.World,s.getId=function(){return r};var x=!(s.getPlayer=function(){return a});null!=(e=document.getElementById("connect"))&&e.addEventListener("click",()=>l(void 0,void 0,void 0,function*(){var t=document.getElementById("error-div");o=document.getElementById("username").value,n=document.getElementById("address").value;try{var e=o,i=n;if(!e)throw new Error("Please provide a username.");if(50<e.length)throw new Error("Username too long! Try another username.");if(!i)throw new Error("Please provide an address.");yield function(e){return l(this,void 0,void 0,function*(){(d=new WebSocket("ws://"+e)).binaryType="arraybuffer",yield new Promise((t,i)=>{const n=setTimeout(()=>{i(new Error("WebSocket timeout")),d.close()},h.TIMEOUT);d.onmessage=e=>{var e=(0,c.decode)(new Uint8Array(e.data));r=e.id,s.world=new v.World(new w.Vec2(e.size[0],e.size[1]),(0,g.castCorrectTerrain)(e.terrain)),d.send((0,c.encode)({username:o,id:r}).buffer),x=!0,clearTimeout(n),(0,u.setRunning)(!0),(0,u.animate)(),null!=(e=document.getElementById("menu"))&&e.classList.add("hidden");const t=setInterval(()=>{x?d.send((0,c.encode)(new b.PingPacket).buffer):clearInterval(t)},1e3);d.onmessage=e=>{var t=(0,c.decode)(new Uint8Array(e.data));switch(t.type){case"game":var i=t;s.world.entities=i.entities.map(e=>(0,m.castCorrectEntity)(e)),s.world.obstacles=i.obstacles.map(e=>(0,f.castCorrectObstacle)(e)),a=new m.Player(i.player);break;case"map":i=t;s.world.terrains=i.terrains.map(e=>(0,g.castCorrectTerrain)(e)),(0,y.initMap)(i.obstacles.map(e=>(0,f.castCorrectObstacle)((0,f.castMinObstacle)(e))))}}},d.onclose=()=>{var e;(x=!1,u.setRunning)(!1),null!=(e=document.getElementById("menu"))&&e.classList.remove("hidden"),a=o=r=null,s.world=new v.World,t(void 0)},d.onerror=e=>{console.error(e),i(new Error("WebSocket error"))}})})}(n),t.style.display="none"}catch(e){t.innerHTML=e.message,t.style.display="block"}})),null!=(e=document.getElementById("disconnect"))&&e.addEventListener("click",()=>{var e;d.close(),null!=(e=document.getElementById("settings"))&&e.classList.add("hidden"),(0,p.toggleMenu)()}),window.onkeydown=e=>{var t,i;x&&!(0,p.isKeyPressed)(e.key)&&(e.stopPropagation(),(0,p.addKeyPressed)(e.key),t=document.getElementById("settings"),e.key==h.KeyBind.MENU?((0,p.isMenuHidden)()?null!=t&&t.classList.remove("hidden"):null!=t&&t.classList.add("hidden"),(0,p.toggleMenu)()):e.key==h.KeyBind.HIDE_HUD?(0,p.toggleHud)():e.key==h.KeyBind.WORLD_MAP?(0,p.toggleMap)():e.key==h.KeyBind.HIDE_MAP?(0,p.toggleMinimap)():e.key==h.KeyBind.BIG_MAP&&(0,p.toggleBigMap)(),(0,p.isMenuHidden)())&&0<=(i=h.movementKeys.indexOf(e.key))&&d.send((0,c.encode)(new b.MovementPressPacket(i)).buffer)},window.onkeyup=e=>{x&&(e.stopPropagation(),(0,p.removeKeyPressed)(e.key),0<=(e=h.movementKeys.indexOf(e.key)))&&d.send((0,c.encode)(new b.MovementReleasePacket(e)).buffer)},window.onmousemove=e=>{x&&(e.stopPropagation(),d.send((0,c.encode)(new b.MouseMovePacket(e.x-window.innerWidth/2,e.y-window.innerHeight/2)).buffer))},window.onmousedown=e=>{x&&(e.stopPropagation(),(0,p.addMousePressed)(e.button),d.send((0,c.encode)(new b.MousePressPacket(e.button))))},window.onmouseup=e=>{x&&(e.stopPropagation(),(0,p.removeMousePressed)(e.button),d.send((0,c.encode)(new b.MouseReleasePacket(e.button))))}},{"./constants":2,"./renderer":4,"./rendering/map":6,"./states":7,"./store/entities":12,"./store/obstacles":16,"./store/terrains":19,"./types/math":28,"./types/packet":30,"./types/terrain":31,"msgpack-lite":1}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.animate=i.setRunning=void 0;const l=e("./constants"),c=e("./game"),h=e("./rendering/hud"),u=e("./rendering/map"),y=e("./states"),p=e("./utils"),m=document.getElementById("game");m.width=window.innerWidth,m.height=window.innerHeight;var f=!(window.onresize=()=>{m.width=window.innerWidth,m.height=window.innerHeight});i.setRunning=function(e){f=e};const g=m.getContext("2d");i.animate=function e(){try{g.fillStyle=c.world.defaultTerrain.colorToHex(),g.fillRect(0,0,m.width,m.height);const a=(0,c.getPlayer)();if(a){const d=Math.max(m.width,m.height)/(20+20*a.scope);var t=c.world.size,i=m.width/2-a.position.x*d,n=m.height/2-a.position.y*d,s=t.x*d,r=t.y*d;c.world.terrains.filter(e=>!!e.renderLayerN1).forEach(e=>e.renderLayerN1(a,m,g,d)),c.world.terrains.forEach(e=>e.render(a,m,g,d)),g.globalAlpha=.2;for(let e=0;e<=t.x;e+=l.GRID_INTERVAL)(0,p.lineBetween)(g,m.width/2-(a.position.x-e)*d,Math.max(n,0),m.width/2-(a.position.x-e)*d,Math.min(n+r,m.height));for(let e=0;e<=t.y;e+=l.GRID_INTERVAL)(0,p.lineBetween)(g,Math.max(i,0),m.height/2-(a.position.y-e)*d,Math.min(i+s,m.width),m.height/2-(a.position.y-e)*d);g.globalAlpha=1;var o=[];(o=o.concat(c.world.entities,c.world.obstacles)).push(a),(o=o.sort((e,t)=>e.zIndex-t.zIndex)).filter(e=>!!e.renderLayerN1).forEach(e=>e.renderLayerN1(a,m,g,d)),o.forEach(e=>e.render(a,m,g,d)),g.fillStyle=c.world.defaultTerrain.colorToHex(),g.fillRect(0,0,m.width/2-a.position.x*d,m.height/2-a.position.y*d),g.fillRect(m.width,0,(c.world.size.x-a.position.x)*d-m.width/2,m.height/2-a.position.y*d),g.fillRect(0,m.height,m.width/2-a.position.x*d,(c.world.size.y-a.position.y)*d-m.height/2),g.fillRect(m.width,m.height,(c.world.size.x-a.position.x)*d-m.width/2,(c.world.size.y-a.position.y)*d-m.height/2),g.fillRect(m.width/2-a.position.x*d,0,c.world.size.x*d,m.height/2-a.position.y*d),g.fillRect(m.width/2-a.position.x*d,m.height,c.world.size.x*d,(c.world.size.y-a.position.y)*d-m.height/2),g.fillRect(0,m.height/2-a.position.y*d,m.width/2-a.position.x*d,c.world.size.y*d),g.fillRect(m.width,m.height/2-a.position.y*d,(c.world.size.x-a.position.x)*d-m.width/2,c.world.size.y*d),g.strokeStyle="#000000",g.lineWidth=d/4,g.strokeRect(i,n,s,r),(0,y.isHudHidden)()||(0,h.drawHud)(a,m,g),(0,y.isMapOpened)()?(0,u.drawMap)(m,g):(0,y.isMapHidden)()||(0,u.drawMinimap)(a,m,g)}}catch(e){console.error(e)}f&&requestAnimationFrame(e)}},{"./constants":2,"./game":3,"./rendering/hud":5,"./rendering/map":6,"./states":7,"./utils":33}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.drawHud=void 0;const d=e("../utils");i.drawHud=function(e,t,i){var n=t.width/4,s=t.height/20,r=Math.min(t.width,t.height)/100,o=n-2*r,a=s-2*r;i.fillStyle="#000000",i.globalAlpha=.2,(0,d.roundRect)(i,(t.width-n)/2,t.height-s-r,n,s,r/2),e.health==e.maxHealth?i.fillStyle="#ccc":e.health/e.maxHealth<.8?i.fillStyle="#fdd":e.health/e.maxHealth<.25?i.fillStyle="#daa":i.fillStyle="#fff",i.globalAlpha=1,(0,d.roundRect)(i,(t.width-o)/2,t.height-s,o*e.health/e.maxHealth,a,r/2)}},{"../utils":33}],6:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.drawMinimap=i.drawMap=i.initMap=void 0;const r=e("../constants"),o=e("../game"),a=e("../states"),d=e("../utils"),l=document.createElement("canvas");var c,h;const u=document.createElement("canvas");i.initMap=function(e){var t=o.world.size,i=Math.max(t.x,t.y),n=Math.min(window.screen.availWidth,window.screen.availHeight);l.width=n*t.x/i,l.height=n*t.y/i,h=n/i;const s=l.width/o.world.size.x;(c=l.getContext("2d")).fillStyle=o.world.defaultTerrain.colorToHex(),c.fillRect(0,0,l.width,l.height),o.world.terrains.filter(e=>!!e.renderMapLayerN1).forEach(e=>e.renderMapLayerN1(l,c,s)),o.world.terrains.forEach(e=>e.renderMap(l,c,s)),c.strokeStyle="#000000",c.lineWidth=1,c.globalAlpha=.2;for(let e=0;e<=t.x;e+=r.GRID_INTERVAL)(0,d.lineBetween)(c,e*n/i,0,e*n/i,l.height);for(let e=0;e<=t.y;e+=r.GRID_INTERVAL)(0,d.lineBetween)(c,0,e*n/i,l.width,e*n/i);c.globalAlpha=1,(e=e.sort((e,t)=>e.zIndex-t.zIndex)).filter(e=>!!e.renderMapLayerN1).forEach(e=>e.renderMapLayerN1(l,c,s)),e.forEach(e=>e.renderMap(l,c,s))},i.drawMap=function(e,t){var i,n,s=e.width/l.width,s=(r=e.height/l.height)*l.width>e.width?(i=e.width,n=s*l.height,e.width/o.world.size.x):(i=r*l.width,n=e.height,e.height/o.world.size.y),r=(t.drawImage(l,(e.width-i)/2,(e.height-n)/2,i,n),t.strokeStyle="#000",t.lineWidth=2,t.strokeRect((e.width-i)/2,(e.height-n)/2,i,n),(0,o.getPlayer)());t.fillStyle="#F8C675",(0,d.circleFromCenter)(t,(e.width-i)/2+r.position.x*s,(e.height-n)/2+r.position.y*s,8),(0,d.circleFromCenter)(t,(e.width-i)/2+r.position.x*s,(e.height-n)/2+r.position.y*s,12,!1,!0)},i.drawMinimap=function(e,t,i){var n=r.MINIMAP_SIZE*h*((0,a.isBigMap)()?1.5:1),s=e.position.x*h-n/2,e=e.position.y*h-n/2,s=c.getImageData(s,e,n,n),n=(u.width=u.height=n,null!=(e=u.getContext("2d"))&&e.putImageData(s,0,0),t.width/100),e=t.width/(8/((0,a.isBigMap)()?1.5:1));i.fillStyle=o.world.defaultTerrain.colorToHex(),i.fillRect(n,t.height-n-e,e,e),i.drawImage(u,n,t.height-n-e,e,e),i.strokeStyle="#000",i.lineWidth=2,i.strokeRect(n,t.height-n-e,e,e),i.fillStyle="#F8C675",(0,d.circleFromCenter)(i,n+e/2,t.height-n-e/2,8),(0,d.circleFromCenter)(i,n+e/2,t.height-n-e/2,12,!1,!0)}},{"../constants":2,"../game":3,"../states":7,"../utils":33}],7:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.toggleBigMap=i.isBigMap=i.toggleMinimap=i.isMapHidden=i.toggleMap=i.isMapOpened=i.toggleHud=i.isHudHidden=i.toggleMenu=i.isMenuHidden=i.removeMousePressed=i.addMousePressed=i.isMousePressed=i.removeKeyPressed=i.addKeyPressed=i.isKeyPressed=void 0;const n=new Map;i.isKeyPressed=function(e){return!!n.get(e)},i.addKeyPressed=function(e){n.set(e,!0)},i.removeKeyPressed=function(e){n.delete(e)};const s=new Map;i.isMousePressed=function(e){return!!s.get(e)},i.addMousePressed=function(e){s.set(e,!0)},i.removeMousePressed=function(e){s.delete(e)};var r=!0;i.isMenuHidden=function(){return r};var o=!(i.toggleMenu=function(){r=!r});i.isHudHidden=function(){return o};var a=!(i.toggleHud=function(){o=!o});i.isMapOpened=function(){return a};var d=!(i.toggleMap=function(){a=!a});i.isMapHidden=function(){return d};var l=!(i.toggleMinimap=function(){d=!d});i.isBigMap=function(){return l},i.toggleBigMap=function(){l=!l}},{}],8:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../types/animation"),e=e("../../types/math");const s=new n.DefinedAnimation("left_fist",[new e.Vec2(0,-1),e.Vec2.ONE,new e.Vec2(0,-1)],Array(3).fill(e.Vec2.ZERO),[0,.5,1],50),r=new n.DefinedAnimation("right_fist",[new e.Vec2(0,1),e.Vec2.ONE,new e.Vec2(0,1)],Array(3).fill(e.Vec2.ZERO),[0,.5,1],50);i.default=function(e){e.set(s.id,s),e.set(r.id,r)}},{"../../types/animation":26,"../../types/math":28}],9:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.animations=void 0;e=e("./fists");i.animations=new Map,(0,e.default)(i.animations)},{"./fists":8}],10:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});class n extends e("../../types/entity").Entity{constructor(e){super(e),this.type="bullet",this.dmg=e.dmg}render(e,t,i,n){}}i.default=n},{"../../types/entity":27}],11:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.GunColor=void 0;var n=e("../../types/entity");const r=e("../../utils"),o=new Map,a=["#F2A500","#F20000","#0061F2","#039700"];(e=i.GunColor||(i.GunColor={}))[e.YELLOW=0]="YELLOW",e[e.RED=1]="RED",e[e.BLUE=2]="BLUE",e[e.GREEN=3]="GREEN";class s extends n.Entity{constructor(e){super(e),this.type="gun",this.zIndex=8,this.name=e.name,this.color=e.color}render(e,t,i,n){var e=this.position.addVec(e.position.inverse()),s=n*this.hitbox.comparable,t=(i.translate(t.width/2+e.x*n,t.height/2+e.y*n),i.rotate(-this.direction.angle()),i.strokeStyle=a[this.color],i.lineWidth=.25*n,(0,r.circleFromCenter)(i,0,0,s,!1,!0),i.fillStyle=a[this.color]+"66",(0,r.circleFromCenter)(i,0,0,s,!0,!1),o.get(this.name));t&&i.drawImage(t,-s,-s,2*s,2*s),i.resetTransform()}}i.default=s},{"../../types/entity":27,"../../utils":33}],12:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.castCorrectEntity=i.Gun=i.Bullet=i.Player=void 0;const n=e("../../types/entity"),s=e("./bullet"),r=e("./gun"),o=e("./player");var a=e("./player"),d=(Object.defineProperty(i,"Player",{enumerable:!0,get:function(){return a.default}}),e("./bullet")),l=(Object.defineProperty(i,"Bullet",{enumerable:!0,get:function(){return d.default}}),e("./gun"));Object.defineProperty(i,"Gun",{enumerable:!0,get:function(){return l.default}}),i.castCorrectEntity=function(e){switch(e.type){case"player":return new o.default(e);case"bullet":return new s.default(e);case"gun":return new r.default(e);default:return new n.DummyEntity(e)}}},{"../../types/entity":27,"./bullet":10,"./gun":11,"./player":13}],13:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n=e("../../types/entity"),r=e("../../utils"),o=e("../weapons"),a=Object.assign(new Image,{loaded:!1});a.onload=()=>a.loaded=!0,a.src="assets/images/game/entities/death.svg";class s extends n.Entity{constructor(e){var t;super(e),this.type="player",this.zIndex=9,this.id=e.id,this.username=e.username,this.boost=e.boost,this.scope=e.scope,"number"==typeof e.inventory.holding?(t=e.inventory.weapons[e.inventory.holding],this.inventory=new n.Inventory({holding:t})):this.inventory=new n.Inventory(e.inventory)}render(e,t,i,n){var e=this.position.addVec(e.position.inverse()),s=n*this.hitbox.comparable;i.translate(t.width/2+e.x*n,t.height/2+e.y*n),this.despawn?(i.drawImage(a,2*-s,2*-s,4*s,4*s),i.textAlign="center",i.textBaseline="top",i.font=`700 ${n}px Jura`,i.fillStyle="#60605f",i.fillText(this.username,2,2*s+2),i.fillStyle="#80807f",i.fillText(this.username,0,2*s)):(i.rotate(-this.direction.angle()),i.fillStyle="#F8C675",(0,r.circleFromCenter)(i,0,0,s),(this.inventory.holding||new o.Fists).render(this,t,i,n)),i.resetTransform()}}i.default=s},{"../../types/entity":27,"../../utils":33,"../weapons":25}],14:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../types/obstacle");const s=e("../../utils"),r=Object.assign(new Image,{loaded:!1}),o=(r.onload=()=>r.loaded=!0,r.src="assets/images/game/objects/bush.svg",Object.assign(new Image,{loaded:!1}));o.onload=()=>o.loaded=!0,o.src="assets/images/game/objects/residues/bush.svg";class a extends n.Obstacle{constructor(e){super(e),this.type="bush",this.zIndex=10,this.despawn&&(this.zIndex=0)}render(e,t,i,n){r.loaded&&o.loaded&&(e=this.position.addVec(e.position.inverse()),i.translate(t.width/2+e.x*n,t.height/2+e.y*n),i.rotate(-this.direction.angle()),t=this.despawn?o:r,n=(e=n*this.hitbox.comparable*2*(this.despawn?.5:1))*t.naturalWidth/t.naturalHeight,i.drawImage(t,-e/2,-n/2,e,n),i.resetTransform())}renderMap(e,t,i){t.fillStyle="#005f00",(0,s.circleFromCenter)(t,this.position.x*i,this.position.y*i,2*i)}}i.default=a},{"../../types/obstacle":29,"../../utils":33}],15:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});e=e("../../types/obstacle");const o=Object.assign(new Image,{loaded:!1}),a=(o.onload=()=>o.loaded=!0,o.src="assets/images/game/objects/crate.svg",Object.assign(new Image,{loaded:!1}));a.onload=()=>a.loaded=!0,a.src="assets/images/game/objects/residues/crate.svg";class n extends e.Obstacle{constructor(){super(...arguments),this.type="crate"}render(e,t,i,n){var s,r;o.loaded&&a.loaded&&(e=this.position.addVec(e.position.inverse()),r=(s=n*this.hitbox.width*(this.despawn?.5:1))*o.naturalWidth/o.naturalHeight,i.translate(t.width/2+e.x*n,t.height/2+e.y*n),i.rotate(-this.direction.angle()),i.drawImage(this.despawn?a:o,-s/2,-r/2,s,r),i.resetTransform())}renderMap(e,t,i){t.translate(this.position.x*i,this.position.y*i),t.fillStyle="#683c05",t.fillRect(-2*i,-2*i,4*i,4*i),t.resetTransform()}}i.default=n},{"../../types/obstacle":29}],16:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.castMinObstacle=i.castCorrectObstacle=i.Stone=i.Crate=i.Bush=i.Tree=void 0;const n=e("../../types/math"),s=e("../../types/obstacle"),r=e("./bush"),o=e("./crate"),a=e("./stone"),d=e("./tree");var l=e("./tree"),c=(Object.defineProperty(i,"Tree",{enumerable:!0,get:function(){return l.default}}),e("./bush")),h=(Object.defineProperty(i,"Bush",{enumerable:!0,get:function(){return c.default}}),e("./crate")),u=(Object.defineProperty(i,"Crate",{enumerable:!0,get:function(){return h.default}}),e("./stone"));Object.defineProperty(i,"Stone",{enumerable:!0,get:function(){return u.default}}),i.castCorrectObstacle=function(e){switch(e.type){case"tree":return new d.default(e);case"bush":return new r.default(e);case"crate":return new o.default(e);case"stone":return new a.default(e);default:return new s.DummyObstacle(e)}},i.castMinObstacle=function(e){return Object.assign(e,{direction:n.Vec2.ONE,hitbox:new n.CircleHitbox(0),despawn:!1})}},{"../../types/math":28,"../../types/obstacle":29,"./bush":14,"./crate":15,"./stone":17,"./tree":18}],17:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../types/obstacle");const s=e("../../utils"),r=Object.assign(new Image,{loaded:!1});r.onload=()=>r.loaded=!0,r.src="assets/images/game/objects/stone.svg";class o extends n.Obstacle{constructor(){super(...arguments),this.type="stone"}render(e,t,i,n){r.loaded&&(e=this.position.addVec(e.position.inverse()),i.translate(t.width/2+e.x*n,t.height/2+e.y*n),i.rotate(-this.direction.angle()),this.despawn?(t=n*this.hitbox.comparable/2,i.fillStyle="#000000",i.globalAlpha=.25,(0,s.circleFromCenter)(i,0,0,t),i.globalAlpha=1):(t=(e=n*this.hitbox.comparable*2)*r.naturalWidth/r.naturalHeight,i.drawImage(r,-e/2,-t/2,e,t)),i.resetTransform())}renderMap(e,t,i){t.fillStyle="#b3b3b3",(0,s.circleFromCenter)(t,this.position.x*i,this.position.y*i,2*i)}}i.default=o},{"../../types/obstacle":29,"../../utils":33}],18:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../types/obstacle");const s=e("../../utils"),r=Object.assign(new Image,{loaded:!1}),o=(r.onload=()=>r.loaded=!0,r.src="assets/images/game/objects/tree.svg",Object.assign(new Image,{loaded:!1}));o.onload=()=>o.loaded=!0,o.src="assets/images/game/objects/residues/tree.svg";class a extends n.Obstacle{constructor(e){super(e),this.type="tree",this.zIndex=1e3,this.despawn&&(this.zIndex=0)}render(e,t,i,n){r.loaded&&o.loaded&&(e=this.position.addVec(e.position.inverse()),i.translate(t.width/2+e.x*n,t.height/2+e.y*n),i.rotate(-this.direction.angle()),t=this.despawn?o:r,n=(e=n*this.hitbox.comparable*2*(this.despawn?1:3.6))*t.naturalWidth/t.naturalHeight,i.drawImage(t,-e/2,-n/2,e,n),i.resetTransform())}renderMap(e,t,i){t.fillStyle="#3e502e",(0,s.circleFromCenter)(t,this.position.x*i,this.position.y*i,1.5*i*3.6)}}i.default=a},{"../../types/obstacle":29,"../../utils":33}],19:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.castCorrectTerrain=i.Sea=i.RiverSegment=i.River=i.Pond=i.Plain=void 0;const n=e("./plain"),s=e("./pond"),r=e("./river"),o=e("./sea");var a=e("./plain"),d=(Object.defineProperty(i,"Plain",{enumerable:!0,get:function(){return a.default}}),e("./pond")),l=(Object.defineProperty(i,"Pond",{enumerable:!0,get:function(){return d.default}}),e("./river")),c=(Object.defineProperty(i,"River",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(i,"RiverSegment",{enumerable:!0,get:function(){return l.RiverSegment}}),e("./sea"));Object.defineProperty(i,"Sea",{enumerable:!0,get:function(){return c.default}}),i.castCorrectTerrain=function(e){switch(e.id){case"plain":return new n.default(e);case"pond":return new s.default(e);case"river_segment":return new r.RiverSegment(e);case"river":return new r.default(e);case"sea":return new o.default(e);default:return new n.default(e)}}},{"./plain":20,"./pond":21,"./river":22,"./sea":23}],20:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});class n extends e("../../types/terrain").Terrain{constructor(e){super(e),this.color=8434257}render(e,t,i,n){}renderMap(e,t,i){}}i.default=n},{"../../types/terrain":31}],21:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../types/terrain");const s=e("../../utils");class r extends n.DotTerrain{constructor(e){super(e),this.id="pond",this.color=3441067,this.secondaryColor=9461286}renderLayerN1(e,t,i,n){e=this.position.addVec(e.position.inverse());i.translate(t.width/2+e.x*n,t.height/2+e.y*n),i.fillStyle=this.colorToHex(this.secondaryColor),(0,s.circleFromCenter)(i,0,0,(this.radius+this.border)*n),i.resetTransform()}renderMapLayerN1(e,t,i){t.fillStyle=this.colorToHex(this.secondaryColor),(0,s.circleFromCenter)(t,this.position.x*i,this.position.y*i,(this.radius+this.border)*i)}}i.default=r},{"../../types/terrain":31,"../../utils":33}],22:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.RiverSegment=void 0;const d=e("../../types/math");e=e("../../types/terrain");class n extends e.LineTerrain{constructor(){super(...arguments),this.id="river_segment",this.color=3441067,this.secondaryColor=9461286}renderLayerN1(e,t,i,n){i.translate(t.width/2,t.height/2),i.scale(n,n),i.translate(-e.position.x,-e.position.y);var s,t=this.line.toParallel(this.range+this.border,!1),e=new d.Line(this.line.a,this.boundary.start.addVec(this.line.a),!1),r=new d.Line(this.line.b,this.boundary.end.addVec(this.line.b),!1),o=t[0].intersection(e);o&&(s=t[0].intersection(r))&&(r=t[1].intersection(r))&&(t=t[1].intersection(e))&&(i.fillStyle=this.colorToHex(this.secondaryColor),i.beginPath(),i.moveTo(o.x-1/n,o.y-1/n),i.lineTo(s.x,s.y),i.lineTo(r.x,r.y),i.lineTo(t.x-1/n,t.y-1/n),i.closePath(),i.fill(),i.resetTransform())}renderMapLayerN1(e,t,i){t.scale(i,i);var n,s=this.line.toParallel(this.range+this.border,!1),r=new d.Line(this.line.a,this.boundary.start.addVec(this.line.a),!1),o=new d.Line(this.line.b,this.boundary.end.addVec(this.line.b),!1),a=s[0].intersection(r);a&&(n=s[0].intersection(o))&&(o=s[1].intersection(o))&&(s=s[1].intersection(r))&&(t.fillStyle=this.colorToHex(this.secondaryColor),t.beginPath(),t.moveTo(a.x-1/i,a.y-1/i),t.lineTo(n.x,n.y),t.lineTo(o.x,o.y),t.lineTo(s.x-1/i,s.y-1/i),t.closePath(),t.fill(),t.resetTransform())}}i.RiverSegment=n;class s extends e.PiecewiseTerrain{constructor(e){super(e),this.id="river",this.color=4281631147,this.secondaryColor=4287651366}renderLayerN1(t,i,n,s){this.lines.forEach(e=>e.renderLayerN1(t,i,n,s))}renderMapLayerN1(t,i,n){this.lines.forEach(e=>e.renderMapLayerN1(t,i,n))}}i.default=s},{"../../types/math":28,"../../types/terrain":31}],23:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});class n extends e("../../types/terrain").LineTerrain{constructor(){super(...arguments),this.id="sea",this.color=3441067}}i.default=n},{"../../types/terrain":31}],24:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const y=e("../../constants"),p=e("../../types/math");var n=e("../../types/weapon");const m=e("../../utils"),f=e("../animations"),g=["left_fist","right_fist"];class s extends n.Weapon{constructor(){super({id:"fists",name:"Fists"})}render(e,t,i,n){var n=n*e.hitbox.radius,s=1.2*n*y.CommonNumber.SIN45,r=p.Vec2.ONE.scaleAll(s),o=[],a=f.animations.get(e.animation.name);if(a){var d=g.indexOf(e.animation.name),l=(a.duration-e.animation.duration)/a.duration;for(let e=0;e<a.keyframes.length-1;e++)if(l>=a.keyframes[e]&&l<=a.keyframes[e+1]){var c=a.positions[e].addVec(a.positions[e+1].addVec(a.positions[e].inverse()).scaleAll((l-a.keyframes[e])/(a.keyframes[e+1]-a.keyframes[e]))).scaleAll(s);o.push(r.addVec(c));break}o.push(r.addVec(r.addAngle(y.CommonAngle.PI_TWO*(2*-d+1))))}else o.push(r.addVec(r.addAngle(y.CommonAngle.PI_TWO))),o.push(r.addVec(r.addAngle(-y.CommonAngle.PI_TWO)));var h=n/3;i.lineWidth=h/3,i.strokeStyle="#000000",i.rotate(2*e.direction.angle());for(const u of o)(0,m.circleFromCenter)(i,u.x,u.y,h,!0,!0)}}i.default=s},{"../../constants":2,"../../types/math":28,"../../types/weapon":32,"../../utils":33,"../animations":9}],25:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.castCorrectWeapon=i.Fists=void 0;const n=e("../../types/weapon"),s=e("./fists");var r=e("./fists");Object.defineProperty(i,"Fists",{enumerable:!0,get:function(){return r.default}}),i.castCorrectWeapon=function(e){return"fists"!==e.id?new n.DummyWeapon(e):new s.default}},{"../../types/weapon":32,"./fists":24}],26:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DefinedAnimation=void 0;i.DefinedAnimation=class{constructor(e,t,i,n,s){this.id=e,this.positions=t,this.rotations=i,this.keyframes=n,this.duration=s}}},{}],27:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DummyEntity=i.Entity=i.Inventory=void 0;const n=e("../store/weapons"),s=e("./math");i.Inventory=class{constructor(e){this.holding=(0,n.castCorrectWeapon)(e.holding)}};class r{constructor(e){var t;this.zIndex=0,this.type=e.type,this.position=new s.Vec2(e.position.x,e.position.y),this.direction=new s.Vec2(e.direction.x,e.direction.y),"rect"===e.hitbox.type?(t=e.hitbox,this.hitbox=new s.RectHitbox(t.width,t.height)):(t=e.hitbox,this.hitbox=new s.CircleHitbox(t.radius)),this.animation=e.animation,this.health=this.maxHealth=100,this.despawn=e.despawn}}i.Entity=r;i.DummyEntity=class extends r{render(e,t,i,n){}}},{"../store/weapons":25,"./math":28}],28:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MovementDirection=i.CircleHitbox=i.RectHitbox=i.Line=i.Vec2=void 0;class n{static fromMinVec2(e){return new n(e.x,e.y)}constructor(e,t){this.x=e,this.y=t}magnitudeSqr(){return this.x*this.x+this.y*this.y}magnitude(){return Math.sqrt(this.magnitudeSqr())}inverse(){return new n(-this.x,-this.y)}unit(){var e=this.magnitude();return 0===e?n.ZERO:new n(this.x/e,this.y/e)}dot(e){return this.x*e.x+this.y*e.y}angleBetween(e){return Math.acos(this.dot(e)/(this.magnitude()*e.magnitude()))}angle(){var e=Math.acos(this.x/this.magnitude());return 0<this.y?e:-e}addAngle(e){var e=this.angle()+e,t=this.magnitude();return new n(t*Math.cos(e),t*Math.sin(e))}addVec(e){return new n(this.x+e.x,this.y+e.y)}addX(e){return new n(this.x+e,this.y)}addY(e){return new n(this.x,this.y+e)}scale(e,t){return new n(this.x*e,this.y*t)}scaleAll(e){return this.scale(e,e)}projectTo(e){return e.scaleAll(this.dot(e)/e.magnitudeSqr())}distanceSqrTo(e){return this.addVec(e.inverse()).magnitudeSqr()}distanceTo(e){return Math.sqrt(this.distanceSqrTo(e))}perpendicular(){return new n(this.y,-this.x)}equals(e){return this.x===e.x&&this.y===e.y}render(e,t,i,n,s){s=s.addVec(e.position.inverse());i.translate(t.width/2+s.x*n,t.height/2+s.y*n),i.strokeStyle="#ff0000",i.lineWidth=2,i.beginPath(),i.moveTo(0,0),i.lineTo(this.x*n,this.y*n),i.stroke(),i.resetTransform()}renderPoint(e,t,i,n,s){e=s.addVec(e.position.inverse());i.translate(t.width/2+e.x*n,t.height/2+e.y*n),i.strokeStyle="#ff0000",i.lineWidth=2,i.beginPath(),i.moveTo(0,0),i.lineTo((this.x-s.x)*n,(this.y-s.y)*n),i.stroke(),i.resetTransform()}}(i.Vec2=n).ZERO=new n(0,0),n.ONE=new n(1,0);i.Line=class o{static fromMinLine(e){return new o(n.fromMinVec2(e.a),n.fromMinVec2(e.b),e.segment)}static fromPointSlope(e,t){return t=new n(e.x+1,(e.y+1)*t),new o(e,t,!1)}constructor(e,t,i){e.x<t.x?(this.a=e,this.b=t):(this.a=t,this.b=e),this.segment=void 0===i||i}direction(e){return(this.b.y-this.a.y)*(e.x-this.b.x)-(this.b.x-this.a.x)*(e.y-this.b.y)}distanceSqrTo(e){var t,i,n,s=this.toVec(),r=e.addVec(this.a.inverse());return this.segment?(i=e.addVec(this.b.inverse()),t=s.dot(i),n=s.dot(r),0<t?i.magnitude():n<0?r.magnitude():(t=this.b.y-this.a.y,i=this.a.x-this.b.x,n=(this.b.x-this.a.x)*this.a.y-(this.b.y-this.a.y)*this.a.x,Math.pow(t*e.x+i*e.y+n,2)/(t*t+i*i))):r.projectTo(s.perpendicular()).magnitudeSqr()}distanceTo(e){return Math.sqrt(this.distanceSqrTo(e))}intersects(e){var t=e.direction(this.a),i=e.direction(this.b),n=this.direction(e.a),s=this.direction(e.b);return t!=i&&n!=s||!!(0==t&&e.passthrough(this.a)||0==i&&e.passthrough(this.b)||0==n&&e.passthrough(e.a)||0==s&&e.passthrough(e.b))}passthrough(e){var t,i=this.slope();return void 0===i?!(e.x!=this.a.x||this.segment&&(e.y<Math.min(this.a.y,this.b.y)||e.y>Math.max(this.a.y,this.b.y))):(t=this.a.y-i*this.a.x,!(e.y!=i*e.x+t||this.segment&&(e.x<this.a.x||e.x>this.b.x||e.y<Math.min(this.a.y,this.b.y)||e.y>Math.max(this.a.y,this.b.y))))}leftTo(e){var t,i=this.slope();return void 0===i?e.x<this.a.x:(t=this.a.y-i*this.a.x,e.x<(e.y-t)/i)}rightTo(e){var t,i=this.slope();return void 0===i?e.x>this.a.x:(t=this.a.y-i*this.a.x,e.x>(e.y-t)/i)}slope(){if(this.b.x-this.a.x!=0)return(this.b.y-this.a.y)/(this.b.x-this.a.x)}yIntercept(){var e=this.slope();if(void 0!==e)return this.a.y-e*this.a.x}toVec(){return this.b.addVec(this.a.inverse())}toParallel(e,t){void 0===t&&(t=this.segment);var e=this.toVec().perpendicular().unit().scaleAll(e),i=new o(this.a.addVec(e),this.b.addVec(e),t),e=e.inverse();return[i,new o(this.a.addVec(e),this.b.addVec(e),t)]}intersection(e){var t;if(!(this.a.equals(e.a)&&this.b.equals(e.b)||void 0===this.yIntercept()&&void 0===e.yIntercept()))return void 0===this.yIntercept()?new n(this.a.x,e.slope()*this.a.x+e.yIntercept()):void 0===e.yIntercept()?new n(e.a.x,this.slope()*e.a.x+this.yIntercept()):(t=(e.yIntercept()-this.yIntercept())/(this.slope()-e.slope()),t=new n(t,this.slope()*t+this.yIntercept()),this.segment&&!this.passthrough(t)||e.segment&&!e.passthrough(t)?void 0:t)}};class s{constructor(e,t){this.type="rect",this.width=e,this.height=t,this.comparable=Math.sqrt(Math.pow(this.width/2,2)+Math.pow(this.height/2,2))}}(i.RectHitbox=s).ZERO=new s(0,0);class r{constructor(e){this.type="circle",this.comparable=this.radius=e}}(i.CircleHitbox=r).ZERO=new r(0),(i=i.MovementDirection||(i.MovementDirection={}))[i.RIGHT=0]="RIGHT",i[i.UP=1]="UP",i[i.LEFT=2]="LEFT",i[i.DOWN=3]="DOWN"},{}],29:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DummyObstacle=i.Obstacle=void 0;const n=e("./math");class s{constructor(e){var t;this.type="",this.zIndex=0,this.type=e.type,this.position=new n.Vec2(e.position.x,e.position.y),this.direction=new n.Vec2(e.direction.x,e.direction.y),"rect"===e.hitbox.type?(t=e.hitbox,this.hitbox=new n.RectHitbox(t.width,t.height)):(t=e.hitbox,this.hitbox=new n.CircleHitbox(t.radius)),this.despawn=e.despawn}}i.Obstacle=s;i.DummyObstacle=class extends s{render(e,t,i,n){}renderMap(e,t,i){}}},{"./math":28}],30:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MapPacket=i.GamePacket=i.AckPacket=i.MouseMovePacket=i.MouseReleasePacket=i.MousePressPacket=i.MovementReleasePacket=i.MovementPressPacket=i.PingPacket=void 0;i.PingPacket=class{constructor(){this.type="ping"}};i.MovementPressPacket=class{constructor(e){this.type="movementpress",this.direction=e}};i.MovementReleasePacket=class{constructor(e){this.type="movementrelease",this.direction=e}};i.MousePressPacket=class{constructor(e){this.type="mousepress",this.button=e}};i.MouseReleasePacket=class{constructor(e){this.type="mouserelease",this.button=e}};i.MouseMovePacket=class{constructor(e,t){this.type="mousemove",this.x=e,this.y=t}};i.AckPacket=class{constructor(){this.type="ack"}};i.GamePacket=class{constructor(){this.type="game"}};i.MapPacket=class{constructor(){this.type="map"}}},{}],31:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PiecewiseTerrain=i.LineTerrain=i.DotTerrain=i.Terrain=i.World=void 0;const n=e("../store/terrains"),d=e("./math"),s=e("../utils");i.World=class{constructor(e,t){this.entities=[],this.obstacles=[],this.terrains=[],e=e||d.Vec2.ZERO,this.size=e,t=t||new n.Plain({id:"plain",border:0}),this.defaultTerrain=t}};class r{constructor(e){this.type="generic",this.color=0,this.id=e.id,this.border=e.border}colorToHex(e){return"#"+(e=e||this.color).toString(16)}}i.Terrain=r;i.DotTerrain=class extends r{constructor(e){super(e),this.type="dot",this.position=new d.Vec2(e.position.x,e.position.y),this.radius=e.radius}render(e,t,i,n){e=this.position.addVec(e.position.inverse());i.translate(t.width/2+e.x*n,t.height/2+e.y*n),i.fillStyle=this.colorToHex(),(0,s.circleFromCenter)(i,0,0,this.radius*n),i.resetTransform()}renderMap(e,t,i){t.fillStyle=this.colorToHex(),(0,s.circleFromCenter)(t,this.position.x*i,this.position.y*i,this.radius*i)}};i.LineTerrain=class extends r{constructor(e){super(e),this.type="line",this.line=d.Line.fromMinLine(e.line),this.range=e.range,this.boundary={start:d.Vec2.fromMinVec2(e.boundary[0]),end:d.Vec2.fromMinVec2(e.boundary[1])}}render(e,t,i,n){i.translate(t.width/2,t.height/2),i.scale(n,n),i.translate(-e.position.x,-e.position.y);var s,t=this.line.toParallel(this.range,!1),e=new d.Line(this.line.a,this.boundary.start.addVec(this.line.a),!1),r=new d.Line(this.line.b,this.boundary.end.addVec(this.line.b),!1),o=t[0].intersection(e);o&&(s=t[0].intersection(r))&&(r=t[1].intersection(r))&&(t=t[1].intersection(e))&&(i.fillStyle=this.colorToHex(),i.beginPath(),i.moveTo(o.x-1/n,o.y-1/n),i.lineTo(s.x,s.y),i.lineTo(r.x,r.y),i.lineTo(t.x-1/n,t.y-1/n),i.closePath(),i.fill(),i.resetTransform())}renderMap(e,t,i){t.scale(i,i);var n,s=this.line.toParallel(this.range,!1),r=new d.Line(this.line.a,this.boundary.start.addVec(this.line.a),!1),o=new d.Line(this.line.b,this.boundary.end.addVec(this.line.b),!1),a=s[0].intersection(r);a&&(n=s[0].intersection(o))&&(o=s[1].intersection(o))&&(s=s[1].intersection(r))&&(t.fillStyle=this.colorToHex(),t.beginPath(),t.moveTo(a.x-1/i,a.y-1/i),t.lineTo(n.x,n.y),t.lineTo(o.x,o.y),t.lineTo(s.x-1/i,s.y-1/i),t.closePath(),t.fill(),t.resetTransform())}};i.PiecewiseTerrain=class extends r{constructor(e){super(e),this.type="piecewise",this.lines=[];for(const t of e.lines)this.lines.push((0,n.castCorrectTerrain)(t))}render(t,i,n,s){this.lines.forEach(e=>e.render(t,i,n,s))}renderMap(t,i,n){this.lines.forEach(e=>e.renderMap(t,i,n))}}},{"../store/terrains":19,"../utils":33,"./math":28}],32:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DummyWeapon=i.Weapon=void 0;class n{constructor(e){this.id=e.id,this.name=e.name}}i.Weapon=n;i.DummyWeapon=class extends n{render(e,t,i,n){}}},{}],33:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.toDegrees=i.roundRect=i.lineBetween=i.circleFromCenter=i.clamp=i.wait=void 0,i.wait=function(t){return new Promise(e=>setTimeout(e,t))},i.clamp=function(e,t,i){return e<t?t:i<e?i:e},i.circleFromCenter=function(e,t,i,n,s=!0,r=!1){e.beginPath(),e.arc(t,i,n,0,2*Math.PI,!1),s&&e.fill(),r&&e.stroke()},i.lineBetween=function(e,t,i,n,s,r=!0){e.beginPath(),e.moveTo(t,i),e.lineTo(n,s),e.closePath(),r&&e.stroke()},i.roundRect=function(e,t,i,n,s,r,o=!0,a=!1){var d,l,c,h;"number"==typeof(r=void 0===r?5:r)?d=l=c=h=r:(d=r.tl||0,l=r.tr||0,h=r.br||0,c=r.bl||0),e.beginPath(),e.moveTo(t+d,i),e.lineTo(t+n-l,i),e.quadraticCurveTo(t+n,i,t+n,i+l),e.lineTo(t+n,i+s-h),e.quadraticCurveTo(t+n,i+s,t+n-h,i+s),e.lineTo(t+c,i+s),e.quadraticCurveTo(t,i+s,t,i+s-c),e.lineTo(t,i+d),e.quadraticCurveTo(t,i,t+d,i),e.closePath(),o&&e.fill(),a&&e.stroke()},i.toDegrees=function(e){return 180*e/Math.PI}},{}]},{},[3]);

